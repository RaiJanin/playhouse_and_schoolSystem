function bt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Yt}=Object.prototype,{getPrototypeOf:We}=Object,{iterator:Ce,toStringTag:gt}=Symbol,Re=(e=>t=>{const n=Yt.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),V=e=>(e=e.toLowerCase(),t=>Re(t)===e),Oe=e=>t=>typeof t===e,{isArray:se}=Array,re=Oe("undefined");function de(e){return e!==null&&!re(e)&&e.constructor!==null&&!re(e.constructor)&&_(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const vt=V("ArrayBuffer");function Kt(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&vt(e.buffer),t}const Gt=Oe("string"),_=Oe("function"),wt=Oe("number"),ce=e=>e!==null&&typeof e=="object",Xt=e=>e===!0||e===!1,ge=e=>{if(Re(e)!=="object")return!1;const t=We(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(gt in e)&&!(Ce in e)},Qt=e=>{if(!ce(e)||de(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Zt=V("Date"),en=V("File"),tn=V("Blob"),nn=V("FileList"),rn=e=>ce(e)&&_(e.pipe),on=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||_(e.append)&&((t=Re(e))==="formdata"||t==="object"&&_(e.toString)&&e.toString()==="[object FormData]"))},sn=V("URLSearchParams"),[an,ln,dn,cn]=["ReadableStream","Request","Response","Headers"].map(V),un=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ue(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),se(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{if(de(e))return;const a=n?Object.getOwnPropertyNames(e):Object.keys(e),s=a.length;let i;for(r=0;r<s;r++)i=a[r],t.call(null,e[i],i,e)}}function xt(e,t){if(de(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const G=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Et=e=>!re(e)&&e!==G;function _e(){const{caseless:e,skipUndefined:t}=Et(this)&&this||{},n={},r=(o,a)=>{if(a==="__proto__"||a==="constructor"||a==="prototype")return;const s=e&&xt(n,a)||a;ge(n[s])&&ge(o)?n[s]=_e(n[s],o):ge(o)?n[s]=_e({},o):se(o)?n[s]=o.slice():(!t||!re(o))&&(n[s]=o)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&ue(arguments[o],r);return n}const fn=(e,t,n,{allOwnKeys:r}={})=>(ue(t,(o,a)=>{n&&_(o)?Object.defineProperty(e,a,{value:bt(o,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,a,{value:o,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),e),mn=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),pn=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},hn=(e,t,n,r)=>{let o,a,s;const i={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),a=o.length;a-- >0;)s=o[a],(!r||r(s,e,t))&&!i[s]&&(t[s]=e[s],i[s]=!0);e=n!==!1&&We(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},yn=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},bn=e=>{if(!e)return null;if(se(e))return e;let t=e.length;if(!wt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},gn=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&We(Uint8Array)),vn=(e,t)=>{const r=(e&&e[Ce]).call(e);let o;for(;(o=r.next())&&!o.done;){const a=o.value;t.call(e,a[0],a[1])}},wn=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},xn=V("HTMLFormElement"),En=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),Ze=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Sn=V("RegExp"),St=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ue(n,(o,a)=>{let s;(s=t(o,a,e))!==!1&&(r[a]=s||o)}),Object.defineProperties(e,r)},Ln=e=>{St(e,(t,n)=>{if(_(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(_(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Cn=(e,t)=>{const n={},r=o=>{o.forEach(a=>{n[a]=!0})};return se(e)?r(e):r(String(e).split(t)),n},Rn=()=>{},On=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Bn(e){return!!(e&&_(e.append)&&e[gt]==="FormData"&&e[Ce])}const An=e=>{const t=new Array(10),n=(r,o)=>{if(ce(r)){if(t.indexOf(r)>=0)return;if(de(r))return r;if(!("toJSON"in r)){t[o]=r;const a=se(r)?[]:{};return ue(r,(s,i)=>{const f=n(s,o+1);!re(f)&&(a[i]=f)}),t[o]=void 0,a}}return r};return n(e,0)},kn=V("AsyncFunction"),Tn=e=>e&&(ce(e)||_(e))&&_(e.then)&&_(e.catch),Lt=((e,t)=>e?setImmediate:t?((n,r)=>(G.addEventListener("message",({source:o,data:a})=>{o===G&&a===n&&r.length&&r.shift()()},!1),o=>{r.push(o),G.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",_(G.postMessage)),Nn=typeof queueMicrotask<"u"?queueMicrotask.bind(G):typeof process<"u"&&process.nextTick||Lt,In=e=>e!=null&&_(e[Ce]),d={isArray:se,isArrayBuffer:vt,isBuffer:de,isFormData:on,isArrayBufferView:Kt,isString:Gt,isNumber:wt,isBoolean:Xt,isObject:ce,isPlainObject:ge,isEmptyObject:Qt,isReadableStream:an,isRequest:ln,isResponse:dn,isHeaders:cn,isUndefined:re,isDate:Zt,isFile:en,isBlob:tn,isRegExp:Sn,isFunction:_,isStream:rn,isURLSearchParams:sn,isTypedArray:gn,isFileList:nn,forEach:ue,merge:_e,extend:fn,trim:un,stripBOM:mn,inherits:pn,toFlatObject:hn,kindOf:Re,kindOfTest:V,endsWith:yn,toArray:bn,forEachEntry:vn,matchAll:wn,isHTMLForm:xn,hasOwnProperty:Ze,hasOwnProp:Ze,reduceDescriptors:St,freezeMethods:Ln,toObjectSet:Cn,toCamelCase:En,noop:Rn,toFiniteNumber:On,findKey:xt,global:G,isContextDefined:Et,isSpecCompliantForm:Bn,toJSONObject:An,isAsyncFn:kn,isThenable:Tn,setImmediate:Lt,asap:Nn,isIterable:In};let L=class Ct extends Error{static from(t,n,r,o,a,s){const i=new Ct(t.message,n||t.code,r,o,a);return i.cause=t,i.name=t.name,s&&Object.assign(i,s),i}constructor(t,n,r,o,a){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),r&&(this.config=r),o&&(this.request=o),a&&(this.response=a,this.status=a.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:d.toJSONObject(this.config),code:this.code,status:this.status}}};L.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";L.ERR_BAD_OPTION="ERR_BAD_OPTION";L.ECONNABORTED="ECONNABORTED";L.ETIMEDOUT="ETIMEDOUT";L.ERR_NETWORK="ERR_NETWORK";L.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";L.ERR_DEPRECATED="ERR_DEPRECATED";L.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";L.ERR_BAD_REQUEST="ERR_BAD_REQUEST";L.ERR_CANCELED="ERR_CANCELED";L.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";L.ERR_INVALID_URL="ERR_INVALID_URL";const Pn=null;function Fe(e){return d.isPlainObject(e)||d.isArray(e)}function Rt(e){return d.endsWith(e,"[]")?e.slice(0,-2):e}function et(e,t,n){return e?e.concat(t).map(function(o,a){return o=Rt(o),!n&&a?"["+o+"]":o}).join(n?".":""):t}function $n(e){return d.isArray(e)&&!e.some(Fe)}const Dn=d.toFlatObject(d,{},null,function(t){return/^is[A-Z]/.test(t)});function Be(e,t,n){if(!d.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=d.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,h){return!d.isUndefined(h[y])});const r=n.metaTokens,o=n.visitor||l,a=n.dots,s=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&d.isSpecCompliantForm(t);if(!d.isFunction(o))throw new TypeError("visitor must be a function");function c(u){if(u===null)return"";if(d.isDate(u))return u.toISOString();if(d.isBoolean(u))return u.toString();if(!f&&d.isBlob(u))throw new L("Blob is not supported. Use a Buffer instead.");return d.isArrayBuffer(u)||d.isTypedArray(u)?f&&typeof Blob=="function"?new Blob([u]):Buffer.from(u):u}function l(u,y,h){let E=u;if(u&&!h&&typeof u=="object"){if(d.endsWith(y,"{}"))y=r?y:y.slice(0,-2),u=JSON.stringify(u);else if(d.isArray(u)&&$n(u)||(d.isFileList(u)||d.endsWith(y,"[]"))&&(E=d.toArray(u)))return y=Rt(y),E.forEach(function(v,p){!(d.isUndefined(v)||v===null)&&t.append(s===!0?et([y],p,a):s===null?y:y+"[]",c(v))}),!1}return Fe(u)?!0:(t.append(et(h,y,a),c(u)),!1)}const m=[],b=Object.assign(Dn,{defaultVisitor:l,convertValue:c,isVisitable:Fe});function C(u,y){if(!d.isUndefined(u)){if(m.indexOf(u)!==-1)throw Error("Circular reference detected in "+y.join("."));m.push(u),d.forEach(u,function(E,w){(!(d.isUndefined(E)||E===null)&&o.call(t,E,d.isString(w)?w.trim():w,y,b))===!0&&C(E,y?y.concat(w):[w])}),m.pop()}}if(!d.isObject(e))throw new TypeError("data must be an object");return C(e),t}function tt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Ye(e,t){this._pairs=[],e&&Be(e,this,t)}const Ot=Ye.prototype;Ot.append=function(t,n){this._pairs.push([t,n])};Ot.toString=function(t){const n=t?function(r){return t.call(this,r,tt)}:tt;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function Un(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Bt(e,t,n){if(!t)return e;const r=n&&n.encode||Un,o=d.isFunction(n)?{serialize:n}:n,a=o&&o.serialize;let s;if(a?s=a(t,o):s=d.isURLSearchParams(t)?t.toString():new Ye(t,o).toString(r),s){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class nt{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){d.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Ke={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},qn=typeof URLSearchParams<"u"?URLSearchParams:Ye,_n=typeof FormData<"u"?FormData:null,Fn=typeof Blob<"u"?Blob:null,Mn={isBrowser:!0,classes:{URLSearchParams:qn,FormData:_n,Blob:Fn},protocols:["http","https","file","blob","url","data"]},Ge=typeof window<"u"&&typeof document<"u",Me=typeof navigator=="object"&&navigator||void 0,jn=Ge&&(!Me||["ReactNative","NativeScript","NS"].indexOf(Me.product)<0),Hn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zn=Ge&&window.location.href||"http://localhost",Vn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ge,hasStandardBrowserEnv:jn,hasStandardBrowserWebWorkerEnv:Hn,navigator:Me,origin:zn},Symbol.toStringTag,{value:"Module"})),$={...Vn,...Mn};function Jn(e,t){return Be(e,new $.classes.URLSearchParams,{visitor:function(n,r,o,a){return $.isNode&&d.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function Wn(e){return d.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Yn(e){const t={},n=Object.keys(e);let r;const o=n.length;let a;for(r=0;r<o;r++)a=n[r],t[a]=e[a];return t}function At(e){function t(n,r,o,a){let s=n[a++];if(s==="__proto__")return!0;const i=Number.isFinite(+s),f=a>=n.length;return s=!s&&d.isArray(o)?o.length:s,f?(d.hasOwnProp(o,s)?o[s]=[o[s],r]:o[s]=r,!i):((!o[s]||!d.isObject(o[s]))&&(o[s]=[]),t(n,r,o[s],a)&&d.isArray(o[s])&&(o[s]=Yn(o[s])),!i)}if(d.isFormData(e)&&d.isFunction(e.entries)){const n={};return d.forEachEntry(e,(r,o)=>{t(Wn(r),o,n,0)}),n}return null}function Kn(e,t,n){if(d.isString(e))try{return(t||JSON.parse)(e),d.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const fe={transitional:Ke,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,a=d.isObject(t);if(a&&d.isHTMLForm(t)&&(t=new FormData(t)),d.isFormData(t))return o?JSON.stringify(At(t)):t;if(d.isArrayBuffer(t)||d.isBuffer(t)||d.isStream(t)||d.isFile(t)||d.isBlob(t)||d.isReadableStream(t))return t;if(d.isArrayBufferView(t))return t.buffer;if(d.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Jn(t,this.formSerializer).toString();if((i=d.isFileList(t))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Be(i?{"files[]":t}:t,f&&new f,this.formSerializer)}}return a||o?(n.setContentType("application/json",!1),Kn(t)):t}],transformResponse:[function(t){const n=this.transitional||fe.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(d.isResponse(t)||d.isReadableStream(t))return t;if(t&&d.isString(t)&&(r&&!this.responseType||o)){const s=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t,this.parseReviver)}catch(i){if(s)throw i.name==="SyntaxError"?L.from(i,L.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$.classes.FormData,Blob:$.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};d.forEach(["delete","get","head","post","put","patch"],e=>{fe.headers[e]={}});const Gn=d.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Xn=e=>{const t={};let n,r,o;return e&&e.split(`
`).forEach(function(s){o=s.indexOf(":"),n=s.substring(0,o).trim().toLowerCase(),r=s.substring(o+1).trim(),!(!n||t[n]&&Gn[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},rt=Symbol("internals");function le(e){return e&&String(e).trim().toLowerCase()}function ve(e){return e===!1||e==null?e:d.isArray(e)?e.map(ve):String(e)}function Qn(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Zn=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ie(e,t,n,r,o){if(d.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!d.isString(t)){if(d.isString(r))return t.indexOf(r)!==-1;if(d.isRegExp(r))return r.test(t)}}function er(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function tr(e,t){const n=d.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,a,s){return this[r].call(this,t,o,a,s)},configurable:!0})})}let F=class{constructor(t){t&&this.set(t)}set(t,n,r){const o=this;function a(i,f,c){const l=le(f);if(!l)throw new Error("header name must be a non-empty string");const m=d.findKey(o,l);(!m||o[m]===void 0||c===!0||c===void 0&&o[m]!==!1)&&(o[m||f]=ve(i))}const s=(i,f)=>d.forEach(i,(c,l)=>a(c,l,f));if(d.isPlainObject(t)||t instanceof this.constructor)s(t,n);else if(d.isString(t)&&(t=t.trim())&&!Zn(t))s(Xn(t),n);else if(d.isObject(t)&&d.isIterable(t)){let i={},f,c;for(const l of t){if(!d.isArray(l))throw TypeError("Object iterator must return a key-value pair");i[c=l[0]]=(f=i[c])?d.isArray(f)?[...f,l[1]]:[f,l[1]]:l[1]}s(i,n)}else t!=null&&a(n,t,r);return this}get(t,n){if(t=le(t),t){const r=d.findKey(this,t);if(r){const o=this[r];if(!n)return o;if(n===!0)return Qn(o);if(d.isFunction(n))return n.call(this,o,r);if(d.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=le(t),t){const r=d.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Ie(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let o=!1;function a(s){if(s=le(s),s){const i=d.findKey(r,s);i&&(!n||Ie(r,r[i],i,n))&&(delete r[i],o=!0)}}return d.isArray(t)?t.forEach(a):a(t),o}clear(t){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const a=n[r];(!t||Ie(this,this[a],a,t,!0))&&(delete this[a],o=!0)}return o}normalize(t){const n=this,r={};return d.forEach(this,(o,a)=>{const s=d.findKey(r,a);if(s){n[s]=ve(o),delete n[a];return}const i=t?er(a):String(a).trim();i!==a&&delete n[a],n[i]=ve(o),r[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return d.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&d.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[rt]=this[rt]={accessors:{}}).accessors,o=this.prototype;function a(s){const i=le(s);r[i]||(tr(o,s),r[i]=!0)}return d.isArray(t)?t.forEach(a):a(t),this}};F.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);d.reduceDescriptors(F.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});d.freezeMethods(F);function Pe(e,t){const n=this||fe,r=t||n,o=F.from(r.headers);let a=r.data;return d.forEach(e,function(i){a=i.call(n,a,o.normalize(),t?t.status:void 0)}),o.normalize(),a}function kt(e){return!!(e&&e.__CANCEL__)}let me=class extends L{constructor(t,n,r){super(t??"canceled",L.ERR_CANCELED,n,r),this.name="CanceledError",this.__CANCEL__=!0}};function Tt(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new L("Request failed with status code "+n.status,[L.ERR_BAD_REQUEST,L.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function nr(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function rr(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o=0,a=0,s;return t=t!==void 0?t:1e3,function(f){const c=Date.now(),l=r[a];s||(s=c),n[o]=f,r[o]=c;let m=a,b=0;for(;m!==o;)b+=n[m++],m=m%e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),c-s<t)return;const C=l&&c-l;return C?Math.round(b*1e3/C):void 0}}function or(e,t){let n=0,r=1e3/t,o,a;const s=(c,l=Date.now())=>{n=l,o=null,a&&(clearTimeout(a),a=null),e(...c)};return[(...c)=>{const l=Date.now(),m=l-n;m>=r?s(c,l):(o=c,a||(a=setTimeout(()=>{a=null,s(o)},r-m)))},()=>o&&s(o)]}const xe=(e,t,n=3)=>{let r=0;const o=rr(50,250);return or(a=>{const s=a.loaded,i=a.lengthComputable?a.total:void 0,f=s-r,c=o(f),l=s<=i;r=s;const m={loaded:s,total:i,progress:i?s/i:void 0,bytes:f,rate:c||void 0,estimated:c&&i&&l?(i-s)/c:void 0,event:a,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(m)},n)},ot=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},st=e=>(...t)=>d.asap(()=>e(...t)),sr=$.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,$.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL($.origin),$.navigator&&/(msie|trident)/i.test($.navigator.userAgent)):()=>!0,ar=$.hasStandardBrowserEnv?{write(e,t,n,r,o,a,s){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(t)}`];d.isNumber(n)&&i.push(`expires=${new Date(n).toUTCString()}`),d.isString(r)&&i.push(`path=${r}`),d.isString(o)&&i.push(`domain=${o}`),a===!0&&i.push("secure"),d.isString(s)&&i.push(`SameSite=${s}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function ir(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function lr(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Nt(e,t,n){let r=!ir(t);return e&&(r||n==!1)?lr(e,t):t}const at=e=>e instanceof F?{...e}:e;function Q(e,t){t=t||{};const n={};function r(c,l,m,b){return d.isPlainObject(c)&&d.isPlainObject(l)?d.merge.call({caseless:b},c,l):d.isPlainObject(l)?d.merge({},l):d.isArray(l)?l.slice():l}function o(c,l,m,b){if(d.isUndefined(l)){if(!d.isUndefined(c))return r(void 0,c,m,b)}else return r(c,l,m,b)}function a(c,l){if(!d.isUndefined(l))return r(void 0,l)}function s(c,l){if(d.isUndefined(l)){if(!d.isUndefined(c))return r(void 0,c)}else return r(void 0,l)}function i(c,l,m){if(m in t)return r(c,l);if(m in e)return r(void 0,c)}const f={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:i,headers:(c,l,m)=>o(at(c),at(l),m,!0)};return d.forEach(Object.keys({...e,...t}),function(l){if(l==="__proto__"||l==="constructor"||l==="prototype")return;const m=d.hasOwnProp(f,l)?f[l]:o,b=m(e[l],t[l],l);d.isUndefined(b)&&m!==i||(n[l]=b)}),n}const It=e=>{const t=Q({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:a,headers:s,auth:i}=t;if(t.headers=s=F.from(s),t.url=Bt(Nt(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&s.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),d.isFormData(n)){if($.hasStandardBrowserEnv||$.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(d.isFunction(n.getHeaders)){const f=n.getHeaders(),c=["content-type","content-length"];Object.entries(f).forEach(([l,m])=>{c.includes(l.toLowerCase())&&s.set(l,m)})}}if($.hasStandardBrowserEnv&&(r&&d.isFunction(r)&&(r=r(t)),r||r!==!1&&sr(t.url))){const f=o&&a&&ar.read(a);f&&s.set(o,f)}return t},dr=typeof XMLHttpRequest<"u",cr=dr&&function(e){return new Promise(function(n,r){const o=It(e);let a=o.data;const s=F.from(o.headers).normalize();let{responseType:i,onUploadProgress:f,onDownloadProgress:c}=o,l,m,b,C,u;function y(){C&&C(),u&&u(),o.cancelToken&&o.cancelToken.unsubscribe(l),o.signal&&o.signal.removeEventListener("abort",l)}let h=new XMLHttpRequest;h.open(o.method.toUpperCase(),o.url,!0),h.timeout=o.timeout;function E(){if(!h)return;const v=F.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),g={data:!i||i==="text"||i==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:v,config:e,request:h};Tt(function(x){n(x),y()},function(x){r(x),y()},g),h=null}"onloadend"in h?h.onloadend=E:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(E)},h.onabort=function(){h&&(r(new L("Request aborted",L.ECONNABORTED,e,h)),h=null)},h.onerror=function(p){const g=p&&p.message?p.message:"Network Error",S=new L(g,L.ERR_NETWORK,e,h);S.event=p||null,r(S),h=null},h.ontimeout=function(){let p=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const g=o.transitional||Ke;o.timeoutErrorMessage&&(p=o.timeoutErrorMessage),r(new L(p,g.clarifyTimeoutError?L.ETIMEDOUT:L.ECONNABORTED,e,h)),h=null},a===void 0&&s.setContentType(null),"setRequestHeader"in h&&d.forEach(s.toJSON(),function(p,g){h.setRequestHeader(g,p)}),d.isUndefined(o.withCredentials)||(h.withCredentials=!!o.withCredentials),i&&i!=="json"&&(h.responseType=o.responseType),c&&([b,u]=xe(c,!0),h.addEventListener("progress",b)),f&&h.upload&&([m,C]=xe(f),h.upload.addEventListener("progress",m),h.upload.addEventListener("loadend",C)),(o.cancelToken||o.signal)&&(l=v=>{h&&(r(!v||v.type?new me(null,e,h):v),h.abort(),h=null)},o.cancelToken&&o.cancelToken.subscribe(l),o.signal&&(o.signal.aborted?l():o.signal.addEventListener("abort",l)));const w=nr(o.url);if(w&&$.protocols.indexOf(w)===-1){r(new L("Unsupported protocol "+w+":",L.ERR_BAD_REQUEST,e));return}h.send(a||null)})},ur=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,o;const a=function(c){if(!o){o=!0,i();const l=c instanceof Error?c:this.reason;r.abort(l instanceof L?l:new me(l instanceof Error?l.message:l))}};let s=t&&setTimeout(()=>{s=null,a(new L(`timeout of ${t}ms exceeded`,L.ETIMEDOUT))},t);const i=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),e=null)};e.forEach(c=>c.addEventListener("abort",a));const{signal:f}=r;return f.unsubscribe=()=>d.asap(i),f}},fr=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,o;for(;r<n;)o=r+t,yield e.slice(r,o),r=o},mr=async function*(e,t){for await(const n of pr(e))yield*fr(n,t)},pr=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},it=(e,t,n,r)=>{const o=mr(e,t);let a=0,s,i=f=>{s||(s=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:c,value:l}=await o.next();if(c){i(),f.close();return}let m=l.byteLength;if(n){let b=a+=m;n(b)}f.enqueue(new Uint8Array(l))}catch(c){throw i(c),c}},cancel(f){return i(f),o.return()}},{highWaterMark:2})},lt=64*1024,{isFunction:be}=d,hr=(({Request:e,Response:t})=>({Request:e,Response:t}))(d.global),{ReadableStream:dt,TextEncoder:ct}=d.global,ut=(e,...t)=>{try{return!!e(...t)}catch{return!1}},yr=e=>{e=d.merge.call({skipUndefined:!0},hr,e);const{fetch:t,Request:n,Response:r}=e,o=t?be(t):typeof fetch=="function",a=be(n),s=be(r);if(!o)return!1;const i=o&&be(dt),f=o&&(typeof ct=="function"?(u=>y=>u.encode(y))(new ct):async u=>new Uint8Array(await new n(u).arrayBuffer())),c=a&&i&&ut(()=>{let u=!1;const y=new n($.origin,{body:new dt,method:"POST",get duplex(){return u=!0,"half"}}).headers.has("Content-Type");return u&&!y}),l=s&&i&&ut(()=>d.isReadableStream(new r("").body)),m={stream:l&&(u=>u.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(u=>{!m[u]&&(m[u]=(y,h)=>{let E=y&&y[u];if(E)return E.call(y);throw new L(`Response type '${u}' is not supported`,L.ERR_NOT_SUPPORT,h)})});const b=async u=>{if(u==null)return 0;if(d.isBlob(u))return u.size;if(d.isSpecCompliantForm(u))return(await new n($.origin,{method:"POST",body:u}).arrayBuffer()).byteLength;if(d.isArrayBufferView(u)||d.isArrayBuffer(u))return u.byteLength;if(d.isURLSearchParams(u)&&(u=u+""),d.isString(u))return(await f(u)).byteLength},C=async(u,y)=>{const h=d.toFiniteNumber(u.getContentLength());return h??b(y)};return async u=>{let{url:y,method:h,data:E,signal:w,cancelToken:v,timeout:p,onDownloadProgress:g,onUploadProgress:S,responseType:x,headers:O,withCredentials:T="same-origin",fetchOptions:D}=It(u),B=t||fetch;x=x?(x+"").toLowerCase():"text";let A=ur([w,v&&v.toAbortSignal()],p),I=null;const U=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let J;try{if(S&&c&&h!=="get"&&h!=="head"&&(J=await C(O,E))!==0){let N=new n(y,{method:"POST",body:E,duplex:"half"}),M;if(d.isFormData(E)&&(M=N.headers.get("content-type"))&&O.setContentType(M),N.body){const[Y,W]=ot(J,xe(st(S)));E=it(N.body,lt,Y,W)}}d.isString(T)||(T=T?"include":"omit");const P=a&&"credentials"in n.prototype,ae={...D,signal:A,method:h.toUpperCase(),headers:O.normalize().toJSON(),body:E,duplex:"half",credentials:P?T:void 0};I=a&&new n(y,ae);let j=await(a?B(I,D):B(y,ae));const ee=l&&(x==="stream"||x==="response");if(l&&(g||ee&&U)){const N={};["status","statusText","headers"].forEach(K=>{N[K]=j[K]});const M=d.toFiniteNumber(j.headers.get("content-length")),[Y,W]=g&&ot(M,xe(st(g),!0))||[];j=new r(it(j.body,lt,Y,()=>{W&&W(),U&&U()}),N)}x=x||"text";let pe=await m[d.findKey(m,x)||"text"](j,u);return!ee&&U&&U(),await new Promise((N,M)=>{Tt(N,M,{data:pe,headers:F.from(j.headers),status:j.status,statusText:j.statusText,config:u,request:I})})}catch(P){throw U&&U(),P&&P.name==="TypeError"&&/Load failed|fetch/i.test(P.message)?Object.assign(new L("Network Error",L.ERR_NETWORK,u,I,P&&P.response),{cause:P.cause||P}):L.from(P,P&&P.code,u,I,P&&P.response)}}},br=new Map,Pt=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:o}=t,a=[r,o,n];let s=a.length,i=s,f,c,l=br;for(;i--;)f=a[i],c=l.get(f),c===void 0&&l.set(f,c=i?new Map:yr(t)),l=c;return c};Pt();const Xe={http:Pn,xhr:cr,fetch:{get:Pt}};d.forEach(Xe,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ft=e=>`- ${e}`,gr=e=>d.isFunction(e)||e===null||e===!1;function vr(e,t){e=d.isArray(e)?e:[e];const{length:n}=e;let r,o;const a={};for(let s=0;s<n;s++){r=e[s];let i;if(o=r,!gr(r)&&(o=Xe[(i=String(r)).toLowerCase()],o===void 0))throw new L(`Unknown adapter '${i}'`);if(o&&(d.isFunction(o)||(o=o.get(t))))break;a[i||"#"+s]=o}if(!o){const s=Object.entries(a).map(([f,c])=>`adapter ${f} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=n?s.length>1?`since :
`+s.map(ft).join(`
`):" "+ft(s[0]):"as no adapter specified";throw new L("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return o}const $t={getAdapter:vr,adapters:Xe};function $e(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new me(null,e)}function mt(e){return $e(e),e.headers=F.from(e.headers),e.data=Pe.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),$t.getAdapter(e.adapter||fe.adapter,e)(e).then(function(r){return $e(e),r.data=Pe.call(e,e.transformResponse,r),r.headers=F.from(r.headers),r},function(r){return kt(r)||($e(e),r&&r.response&&(r.response.data=Pe.call(e,e.transformResponse,r.response),r.response.headers=F.from(r.response.headers))),Promise.reject(r)})}const Dt="1.13.5",Ae={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ae[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const pt={};Ae.transitional=function(t,n,r){function o(a,s){return"[Axios v"+Dt+"] Transitional option '"+a+"'"+s+(r?". "+r:"")}return(a,s,i)=>{if(t===!1)throw new L(o(s," has been removed"+(n?" in "+n:"")),L.ERR_DEPRECATED);return n&&!pt[s]&&(pt[s]=!0,console.warn(o(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,s,i):!0}};Ae.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function wr(e,t,n){if(typeof e!="object")throw new L("options must be an object",L.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const a=r[o],s=t[a];if(s){const i=e[a],f=i===void 0||s(i,a,e);if(f!==!0)throw new L("option "+a+" must be "+f,L.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new L("Unknown option "+a,L.ERR_BAD_OPTION)}}const we={assertOptions:wr,validators:Ae},H=we.validators;let X=class{constructor(t){this.defaults=t||{},this.interceptors={request:new nt,response:new nt}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Q(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:a}=n;r!==void 0&&we.assertOptions(r,{silentJSONParsing:H.transitional(H.boolean),forcedJSONParsing:H.transitional(H.boolean),clarifyTimeoutError:H.transitional(H.boolean),legacyInterceptorReqResOrdering:H.transitional(H.boolean)},!1),o!=null&&(d.isFunction(o)?n.paramsSerializer={serialize:o}:we.assertOptions(o,{encode:H.function,serialize:H.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),we.assertOptions(n,{baseUrl:H.spelling("baseURL"),withXsrfToken:H.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=a&&d.merge(a.common,a[n.method]);a&&d.forEach(["delete","get","head","post","put","patch","common"],u=>{delete a[u]}),n.headers=F.concat(s,a);const i=[];let f=!0;this.interceptors.request.forEach(function(y){if(typeof y.runWhen=="function"&&y.runWhen(n)===!1)return;f=f&&y.synchronous;const h=n.transitional||Ke;h&&h.legacyInterceptorReqResOrdering?i.unshift(y.fulfilled,y.rejected):i.push(y.fulfilled,y.rejected)});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let l,m=0,b;if(!f){const u=[mt.bind(this),void 0];for(u.unshift(...i),u.push(...c),b=u.length,l=Promise.resolve(n);m<b;)l=l.then(u[m++],u[m++]);return l}b=i.length;let C=n;for(;m<b;){const u=i[m++],y=i[m++];try{C=u(C)}catch(h){y.call(this,h);break}}try{l=mt.call(this,C)}catch(u){return Promise.reject(u)}for(m=0,b=c.length;m<b;)l=l.then(c[m++],c[m++]);return l}getUri(t){t=Q(this.defaults,t);const n=Nt(t.baseURL,t.url,t.allowAbsoluteUrls);return Bt(n,t.params,t.paramsSerializer)}};d.forEach(["delete","get","head","options"],function(t){X.prototype[t]=function(n,r){return this.request(Q(r||{},{method:t,url:n,data:(r||{}).data}))}});d.forEach(["post","put","patch"],function(t){function n(r){return function(a,s,i){return this.request(Q(i||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}X.prototype[t]=n(),X.prototype[t+"Form"]=n(!0)});let xr=class Ut{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(o=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](o);r._listeners=null}),this.promise.then=o=>{let a;const s=new Promise(i=>{r.subscribe(i),a=i}).then(o);return s.cancel=function(){r.unsubscribe(a)},s},t(function(a,s,i){r.reason||(r.reason=new me(a,s,i),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Ut(function(o){t=o}),cancel:t}}};function Er(e){return function(n){return e.apply(null,n)}}function Sr(e){return d.isObject(e)&&e.isAxiosError===!0}const je={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(je).forEach(([e,t])=>{je[t]=e});function qt(e){const t=new X(e),n=bt(X.prototype.request,t);return d.extend(n,X.prototype,t,{allOwnKeys:!0}),d.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return qt(Q(e,o))},n}const k=qt(fe);k.Axios=X;k.CanceledError=me;k.CancelToken=xr;k.isCancel=kt;k.VERSION=Dt;k.toFormData=Be;k.AxiosError=L;k.Cancel=k.CanceledError;k.all=function(t){return Promise.all(t)};k.spread=Er;k.isAxiosError=Sr;k.mergeConfig=Q;k.AxiosHeaders=F;k.formToJSON=e=>At(d.isHTMLForm(e)?new FormData(e):e);k.getAdapter=$t.getAdapter;k.HttpStatusCode=je;k.default=k;const{Axios:Jr,AxiosError:Wr,CanceledError:Yr,isCancel:Kr,CancelToken:Gr,VERSION:Xr,all:Qr,Cancel:Zr,isAxiosError:eo,spread:to,toFormData:no,AxiosHeaders:ro,HttpStatusCode:oo,formToJSON:so,getAdapter:ao,mergeConfig:io}=k;window.axios=k;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const Z={submitURL:"/api/submit/whole-form",makeOtpURL:"/api/submit/make-otp",verifyOtpURL:"/api/verify-otp",searchReturneeURL:"/api/search-returnee",deleteOtpURL:"/api/delete-otp",checkPhoneURL:"/api/check-phone",getOrdersURL:"/api/get-orders",checkOutURL:"/api/check-out"};function R(e,t,n=null,r=null){{const a=(new Error().stack||"").split(`
`)[2]?.trim()||"unknown location";let s="unknown";const i=a.match(/\(?([^\s()]+):(\d+):(\d+)\)?$/);i&&(s=`${i[1].replace(/^.*\/resources\/js\//,"")}:_line_-${i[2]}:${i[3]}`);const f="color: skyblue; font-weight: bold;",c="color: white; font-weight: normal;";switch(e){case"log":n!==null?console.log(`%c[${s}]
%c${t}`,f,c,n):console.log(`%c[${s}]
%c${t}`,f,c);break;case"error":n!==null?console.error(`%c[${s}]
%c${t}`,f,"color:red;font-weight:bold;",n):console.error(`%c[${s}]
%c${t}`,f,"color:red;font-weight:bold;");break;default:console.log(`%c[${s}] %cPlease select a valid option`,f,c)}}}function _t(e){if(!e||e.dataset.birthdayDropdownAttached)return;const t=e.getAttribute("data-name")||"birthday",n=e.hasAttribute("required"),r=e.dataset.birthdayValue||"";let o="",a="",s="";r&&/^\d{4}-\d{2}-\d{2}$/.test(r)&&(s=r.slice(0,4),o=r.slice(5,7),a=r.slice(8,10));const i=document.createElement("input");i.type="hidden",i.name=t,i.value=r,e.appendChild(i);const f=document.createElement("div");f.className="birthday-dropdown-wrapper flex gap-2";const c=document.createElement("select");c.className="birthday-month-select flex-1 bg-teal-100 border-2 border-teal-500 rounded-lg px-2 py-2 text-sm font-semibold focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-200 cursor-pointer",c.setAttribute("aria-label","Month");const l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let m='<option value="">Month</option>';l.forEach((v,p)=>{const g=String(p+1).padStart(2,"0");m+=`<option value="${g}"${g===o?" selected":""}>${v}</option>`}),c.innerHTML=m;const b=document.createElement("select");b.className="birthday-day-select flex-1 bg-teal-100 border-2 border-teal-500 rounded-lg px-2 py-2 text-sm font-semibold focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-200 cursor-pointer",b.setAttribute("aria-label","Day");let C='<option value="">Day</option>';for(let v=1;v<=31;v++){const p=String(v).padStart(2,"0");C+=`<option value="${p}"${p===a?" selected":""}>${v}</option>`}b.innerHTML=C;const u=document.createElement("select");u.className="birthday-year-select flex-1 bg-teal-100 border-2 border-teal-500 rounded-lg px-2 py-2 text-sm font-semibold focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-200 cursor-pointer",u.setAttribute("aria-label","Year");const y=new Date().getFullYear(),h=y-100;let E='<option value="">Year</option>';for(let v=y;v>=h;v--){const p=String(v)===s?" selected":"";E+=`<option value="${v}"${p}>${v}</option>`}u.innerHTML=E,f.appendChild(c),f.appendChild(b),f.appendChild(u),e.appendChild(f);const w=()=>{const v=c.value,p=b.value,g=u.value;if(v&&p&&g){const S=`${g}-${v}-${p}`;i.value=S,e.dataset.birthdayValue=S;const x=new Date(parseInt(g),parseInt(v),0).getDate();parseInt(p)>x?(b.setCustomValidity("Invalid day for selected month"),e.classList.add("birthday-invalid"),e.classList.remove("birthday-valid"),e.removeAttribute("data-birthday-valid")):(b.setCustomValidity(""),e.classList.remove("birthday-invalid"),e.classList.add("birthday-valid"),e.setAttribute("data-birthday-valid","true"))}else i.value="",e.dataset.birthdayValue="",n&&(v||p||g)?(e.classList.add("birthday-invalid"),e.classList.remove("birthday-valid"),e.removeAttribute("data-birthday-valid")):(e.classList.remove("birthday-invalid"),e.classList.remove("birthday-valid"),e.removeAttribute("data-birthday-valid"))};c.addEventListener("change",w),b.addEventListener("change",w),u.addEventListener("change",w),o&&a&&s&&w(),e.dataset.birthdayDropdownAttached="1"}function Lr(e=document){e.querySelectorAll("[data-birthday-dropdown]").forEach(_t)}function Cr(e=document){e.querySelectorAll("[data-birthday-dropdown]").forEach(n=>{const r=n.querySelector(".birthday-month-select"),o=n.querySelector(".birthday-day-select"),a=n.querySelector(".birthday-year-select");r&&r.dispatchEvent(new Event("change",{bubbles:!0})),o&&o.dispatchEvent(new Event("change",{bubbles:!0})),a&&a.dispatchEvent(new Event("change",{bubbles:!0}))})}function ht(e=document){const t=e.querySelectorAll(".birthday-dropdown-wrapper");let n=!1;return t.forEach(r=>{const o=De(r.querySelector(".birthday-month-select")),a=De(r.querySelector(".birthday-day-select")),s=De(r.querySelector(".birthday-year-select"));o&&a&&s&&(n=!0)}),n}function De(e){let t=!0;return e.value?(e.classList.remove("border-red-600"),e.classList.add("border-teal-500")):(e.classList.remove("border-teal-500"),e.classList.add("border-red-600"),t=!1),t}typeof document<"u"&&document.addEventListener("DOMContentLoaded",()=>{Lr()});function yt(e,t=""){let n="",r="",o="";t&&/^\d{4}-\d{2}-\d{2}$/.test(t)&&(o=t.slice(0,4),n=t.slice(5,7),r=t.slice(8,10));const a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let s='<option value="">Month</option>';a.forEach((l,m)=>{const b=String(m+1).padStart(2,"0");s+=`<option value="${b}"${b===n?" selected":""}>${l}</option>`});let i='<option value="">Day</option>';for(let l=1;l<=31;l++){const m=String(l).padStart(2,"0");i+=`<option value="${m}"${m===r?" selected":""}>${l}</option>`}const f=new Date().getFullYear();let c='<option value="">Year</option>';for(let l=f;l>=f-100;l--){const m=String(l)===o?" selected":"";c+=`<option value="${l}"${m}>${l}</option>`}return`
        <div class="birthday-dropdown-wrapper flex gap-2">
            <select class="birthday-month-select flex-1 bg-white border-2 border-gray-200 rounded-lg px-2 py-2.5 text-sm focus:border-teal-500 focus:ring-2 focus:ring-teal-200" data-name="${e}[month]">
                ${s}
            </select>
            <select class="birthday-day-select flex-1 bg-white border-2 border-gray-200 rounded-lg px-2 py-2.5 text-sm focus:border-teal-500 focus:ring-2 focus:ring-teal-200" data-name="${e}[day]">
                ${i}
            </select>
            <select class="birthday-year-select flex-1 bg-white border-2 border-gray-200 rounded-lg px-2 py-2.5 text-sm focus:border-teal-500 focus:ring-2 focus:ring-teal-200" data-name="${e}[year]">
                ${c}
            </select>
        </div>
    `}function Ft(e){if(!e||e.dataset.cameraAttached)return;const t=e.getAttribute("data-name")||"childPhoto";e.id||""+Math.random().toString(36).slice(2);const n=document.createElement("input");n.type="hidden",n.name=t,n.value="",e.appendChild(n);const r=document.createElement("div");r.className="camera-capture-wrapper";const o=document.createElement("video");o.className="camera-video w-full h-48 bg-gray-900 rounded-lg object-cover",o.setAttribute("playsinline",""),o.setAttribute("autoplay",""),o.style.display="none";const a=document.createElement("canvas");a.className="camera-canvas hidden",a.width=320,a.height=240;const s=document.createElement("img");s.className="camera-preview w-full h-48 bg-gray-200 rounded-lg object-cover border-2 border-teal-500",s.alt="Child photo",s.style.display="none";const i=document.createElement("div");i.className="camera-placeholder w-full h-48 bg-gray-100 rounded-lg flex flex-col items-center justify-center border-2 border-dashed border-gray-300",i.innerHTML=`
        <i class="fa-solid fa-camera text-4xl text-gray-400 mb-2"></i>
        <p class="text-sm text-gray-500">No photo captured</p>
    `;const f=document.createElement("div");f.className="camera-buttons flex gap-2 mt-2 relative z-10";const c=document.createElement("button");c.type="button",c.className="start-camera-btn flex-1 bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors relative z-10",c.innerHTML='<i class="fa-solid fa-camera mr-2"></i> Take Photo';const l=document.createElement("button");l.type="button",l.className="upload-btn flex-1 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors relative z-10",l.innerHTML='<i class="fa-solid fa-upload mr-2"></i> Upload';const m=document.createElement("button");m.type="button",m.className="retake-btn flex-1 bg-amber-500 hover:bg-amber-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors hidden relative z-10",m.innerHTML='<i class="fa-solid fa-rotate-right mr-2"></i> Retake';const b=document.createElement("button");b.type="button",b.className="remove-btn flex-1 bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors hidden relative z-10",b.innerHTML='<i class="fa-solid fa-trash mr-2"></i> Remove';const C=document.createElement("input");C.type="file",C.accept="image/*",C.className="hidden",f.appendChild(c),f.appendChild(l),f.appendChild(m),f.appendChild(b);const u=document.createElement("div");u.className="camera-modal fixed inset-0 z-50 flex items-center justify-center bg-black/70 hidden",u.innerHTML=`
        <div class="camera-modal-content bg-white rounded-2xl p-4 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-gray-800">Take Photo</h3>
                <button type="button" class="close-camera-btn text-gray-500 hover:text-gray-700">
                    <i class="fa-solid fa-times text-xl"></i>
                </button>
            </div>
            <video class="modal-video w-full h-56 bg-gray-900 rounded-lg object-cover" playsinline autoplay></video>
            <canvas class="modal-canvas hidden"></canvas>
            <div class="flex gap-2 mt-4">
                <button type="button" class="capture-btn flex-1 bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-4 rounded-lg transition-colors">
                    <i class="fa-solid fa-circle text-xl mr-2"></i> Capture
                </button>
                <button type="button" class="cancel-camera-btn flex-1 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-4 rounded-lg transition-colors">
                    Cancel
                </button>
            </div>
        </div>
    `,r.appendChild(o),r.appendChild(a),r.appendChild(s),r.appendChild(i),r.appendChild(f),r.appendChild(C),e.appendChild(r),document.body.appendChild(u);const y=u.querySelector(".modal-video"),h=u.querySelector(".modal-canvas"),E=u.querySelector(".capture-btn"),w=u.querySelector(".close-camera-btn"),v=u.querySelector(".cancel-camera-btn");let p=null;const g=async()=>{try{p&&(p.getTracks().forEach(B=>B.stop()),p=null),p=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}},audio:!1}),y.srcObject=p,y.style.display="block",u.classList.remove("hidden")}catch(B){R("error","Error accessing camera:",B);let A="Unable to access camera.";B.name==="NotReadableError"?A="Camera is already in use by another application. Please close other apps using the camera.":B.name==="NotAllowedError"?A="Camera permission denied. Please allow camera access in your browser settings.":B.name==="NotFoundError"&&(A="No camera found. Please connect a camera to your device."),alert(A)}},S=()=>{p&&(p.getTracks().forEach(B=>B.stop()),p=null),u.classList.add("hidden")},x=()=>{h.width=y.videoWidth||320,h.height=y.videoHeight||240,h.getContext("2d").drawImage(y,0,0,h.width,h.height);const A=h.toDataURL("image/jpeg",.8);n.value=A,s.src=A,s.style.display="block",i.style.display="none",s.classList.add("rounded-full","object-cover","border-4","border-teal-500","mx-auto"),s.style.width="100px",s.style.height="100px",c.classList.add("hidden"),l.classList.add("hidden"),m.classList.remove("hidden"),m.classList.add("flex-1"),b.classList.remove("hidden"),b.classList.add("flex-1"),S()},O=()=>{g()},T=()=>{n.value="",s.src="",s.style.display="none",s.classList.remove("rounded-full","object-cover","border-4","border-teal-500","mx-auto"),s.style.width="",s.style.height="",i.style.display="flex",c.classList.remove("hidden"),l.classList.remove("hidden"),m.classList.add("hidden"),b.classList.add("hidden")};c.addEventListener("click",g),l.addEventListener("click",()=>C.click()),m.addEventListener("click",O),b.addEventListener("click",T),E.addEventListener("click",x),w.addEventListener("click",S),v.addEventListener("click",S),C.addEventListener("change",B=>{const A=B.target.files[0];if(A){const I=new FileReader;I.onload=U=>{const J=U.target.result;n.value=J,s.src=J,s.style.display="block",i.style.display="none",s.classList.add("rounded-full","object-cover","border-4","border-teal-500","mx-auto"),s.style.width="100px",s.style.height="100px",c.classList.add("hidden"),l.classList.add("hidden"),m.classList.remove("hidden"),m.classList.add("flex-1"),b.classList.remove("hidden"),b.classList.add("flex-1")},I.readAsDataURL(A)}}),u.addEventListener("click",B=>{B.target===u&&S()});const D=B=>{B.key==="Escape"&&!u.classList.contains("hidden")&&(S(),document.removeEventListener("keydown",D))};document.addEventListener("keydown",D),e.dataset.cameraAttached="1"}function Rr(e=document){e.querySelectorAll("[data-camera-input]").forEach(Ft)}typeof document<"u"&&document.addEventListener("DOMContentLoaded",()=>{Rr()});function ne(e,t){if(t==null||t=="")return"";const n=new Date(t);switch(e){case"longDate":return n.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});case"shortDate":return n.toLocaleDateString("en-Us",{month:"short",day:"numeric",year:"numeric"});case"slashDate":{const r=String(n.getMonth()+1).padStart(2,"0"),o=String(n.getDate()).padStart(2,"0"),a=n.getFullYear();return`${r} / ${o} / ${a}`}case"iso":return n.toISOString().split("T")[0];case"timeOnly24":return n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});case"timeOnly12":return n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});default:return n.toLocaleDateString()}}let q={isOldUser:!1,phoneNumber:0,oldUserLoaded:!1,returneeData:null},He={selectCount:0};function Or(e,t){const r=e.photo&&e.photo.length>0?`<img src="/${e.photo}" alt="${e.firstname}'s photo" class="w-24 h-24 rounded-full object-cover border-2 border-teal-500 mx-auto mb-2">`:`<div class="w-24 h-24 rounded-full bg-gray-200 border-2 border-gray-300 mx-auto mb-2 flex items-center justify-center">
            <i class="fa-solid fa-user text-3xl text-gray-400"></i>
          </div>`;return`
        <div class="attached-fields child-entry flex flex-col">
            <input type="name" name="child[${t}][name]" value="${e.firstname}" hidden required/>
            <input type="hidden" name="child[${t}][birthday]" value="${ne("iso",e.birthday)}"/>
            <input type="hidden" name="child[${t}][photo]" value="${e.photo}"/>
            
            <!-- Photo Display for Returning Users -->
            <div class="text-center mb-3">
                ${r}
                <p class="text-sm font-semibold text-gray-700">${e.firstname}</p>
            </div>
            
            <div class="h-full">
                <label class="block text-base font-semibold text-gray-900 mb-2">Playtime Duration <span class="text-red-600">*</span></label>
                <div class="relative">
                    <select name="child[${t}][playDuration]" class="child-duration bg-teal-100 w-full px-4 py-2 border-2 border-teal-500 shadow rounded-lg font-semibold focus:outline-none focus:border-cyan-400 focus:shadow-none transition-all duration-300 cursor-pointer appearance-none" required>
                        <option value="1">1 Hour = 100</option>  
                        <option value="2">2 Hours = 200</option> 
                        <option value="3">3 Hours = 300</option>
                        <option value="4">4 Hours = 400</option>
                        <option value="unlimited">Unlimited = 500</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-teal-500">
                        <i class="fa-solid fa-chevron-down text-sm"></i>
                    </div>
                </div>
            </div>
            <div class="h-full">
                <label class="block text-base font-semibold text-gray-900 mb-2">Add Socks</label>
                <div class="relative">
                    <select name="child[${t}][addSocks]" data-child-index="${t}" class="edit-child-socks bg-teal-100 w-full px-4 py-2 border-2 border-teal-500 shadow rounded-lg font-semibold focus:outline-none focus:border-cyan-400 focus:shadow-none transition-all duration-300 cursor-pointer appearance-none" required>
                        <option value="0">No</option>  
                        <option value="1">Yes</option> 
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-teal-500">
                        <i class="fa-solid fa-chevron-down text-sm"></i>
                    </div>
                </div>
            </div>
        </div>
    `}function Qe(e=!1){let t=!0;const n=document.getElementById("add-child-prompt");return He.selectCount===0&&!e?(n.hidden=!1,n.textContent="You need to add at least one child to continue.",t=!1):(n.textContent="",n.hidden=!0),t}class ke{constructor(t,n,r){this.button=document.getElementById(`${t}`),this.icon=document.getElementById(`${n}`),this.info=document.getElementById(`${r}`),this.state=!1,this.button.addEventListener("click",()=>this.toggle())}toggle(){return this.state=!this.state,this.icon.classList.toggle("fa-solid",this.state),this.icon.classList.toggle("fa-square-check",this.state),this.icon.classList.toggle("text-green-500",this.state),this.icon.classList.toggle("fa-regular",!this.state),this.icon.classList.toggle("fa-square",!this.state),this.icon.classList.toggle("text-red-500",!this.state),this.button.dispatchEvent(new CustomEvent("change",{detail:{checked:this.state}})),this.state}setLabel(t){this.info.innerHTML=t}isChecked(){return this.state}onChange(t){this.button.addEventListener("change",n=>t(n.detail.checked))}}function Ue(e=!0){const t=document.getElementById("parentBirthday"),n=document.getElementById("parentBirthday-hidden");e?(t.disabled=!0,n.disabled=!1):(t.disabled=!1,n.disabled=!0)}function Br(e=!0){const t=document.getElementById("edit-parent-checkbox-el");e?t.classList.remove("hidden"):t.classList.add("hidden")}function Ee(e,t){e.forEach(n=>{!t&&n.hasAttribute("required")?n.removeAttribute("readonly"):n.setAttribute("readonly",!0)})}function Mt(e,t){e.querySelectorAll(".birthday-dropdown-wrapper").forEach(r=>{t?(r.querySelector(".birthday-month-select").disabled=!0,r.querySelector(".birthday-day-select").disabled=!0,r.querySelector(".birthday-year-select").disabled=!0,r.classList.add("disabled:cursor-not-allowed")):(r.querySelector(".birthday-month-select").disabled=!1,r.querySelector(".birthday-day-select").disabled=!1,r.querySelector(".birthday-year-select").disabled=!1,r.classList.remove("disabled:cursor-not-allowed"))})}const Se=[document.getElementById("guardianName"),document.getElementById("guardianLastName"),document.getElementById("guardianPhone")],jt=[document.getElementById("parentName"),document.getElementById("parentLastName"),document.getElementById("parentEmail")],oe=new ke("add-guardian-checkbox","check-add-guardian-icon","check-add-guardian-info");oe.setLabel(`
    Add Guardian <span class="text-red-600">*</span>
`);oe.onChange(e=>{document.getElementById("guardian-form").hidden=!e,Se.forEach(t=>{t&&(t.required=e)}),oe.isChecked()||Se.forEach(t=>{t&&(t.value="",t.required=!1)})});const Ht=new ke("edit-parent-checkbox","edit-parent-icon","edit-parent-info");Ht.setLabel("Edit info");Ht.onChange(e=>{Ee(jt,!e),Mt(document.getElementById("parentBirthday"),!e),R("log","Returnee Data: ",q.returneeData),q.returneeData.oldUserData.guardians.length>=1&&Ee(Se,!e)});const Le=new ke("confirm-guardian-checkbox","confirm-guardian-icon","confirm-guardian-info");Le.setLabel(`
    This guardian is allowed to pick up this child
`);Le.onChange(()=>{Le.isChecked()?document.getElementById("guardianAuthorized").value="1":document.getElementById("guardianAuthorized").value="0"});const ze=document.getElementById("exist-children");function Ar(e){R("log","Auto-filling fields with:",e),q.oldUserLoaded=e.userLoaded,document.getElementById("parentName").value=e.oldUserData.firstname,document.getElementById("parentLastName").value=e.oldUserData.lastname,document.getElementById("parentEmail").value=e.oldUserData.email,document.getElementById("parentBirthday-hidden").value=ne("iso",e.oldUserData.birthday);const t=document.getElementById("parentBirthday"),n=ne("iso",e.oldUserData.birthday);if(n&&/^\d{4}-\d{2}-\d{2}$/.test(n)){const r=n.slice(0,4),o=n.slice(5,7),a=n.slice(8,10);t.querySelector(".birthday-month-select").value=o,t.querySelector(".birthday-day-select").value=a,t.querySelector(".birthday-year-select").value=r}e.oldUserData.guardians.length>=1&&(e.oldUserData.guardians.forEach(r=>{document.getElementById("guardianName").value=r.firstname,document.getElementById("guardianLastName").value=r.lastname,document.getElementById("guardianPhone").value=r.mobileno,document.getElementById("add-guardian-checkbox").classList.add("hidden"),oe.toggle(),r.guardianauthorized&&Le.toggle()}),document.getElementById("guardian-form").hidden=!1,Ee(Se,!0)),Ee(jt,!0),Mt(document.getElementById("parentBirthday"),!0)}function kr(e,t){R("log","Children data: ",e);const n=document.getElementById("new-customer-header"),r=document.getElementById("returnee-customer-header"),o=document.getElementById("existing-children-add-m");document.getElementById("parent-name").textContent=t,ze.hidden=!1,n.hidden=!0,r.hidden=!1,o.hidden=!1,e.forEach((a,s)=>{const i=document.createElement("div");i.className="exist-child-el flex flex-col p-3 gap-6 border border-teal-600 rounded-lg",i.innerHTML=`
            <div>
                <button type="button" class="add-exist-child text-start text-teal-700 font-semibold py-0 px-4 w-25 rounded-full mb-2 hover:text-teal-500 transition-all duration-300">
                    <i class="check-i fa-solid fa-plus"></i> Add
                </button>
                <h3 class="bg-teal-100 w-full px-4 py-2 border-2 border-teal-500 shadow rounded-lg font-semibold focus:outline-none focus:border-cyan-400 focus:shadow-none transition-all duration-300">${a.firstname}</h3>
            </div>
        `,ze.appendChild(i);let f=!1;const c=i.querySelector(".check-i"),l=i.querySelector(".add-exist-child");l.addEventListener("click",()=>{if(f=!f,f)c.classList.remove("fa-plus"),l.classList.remove("text-teal-700"),c.classList.add("fa-check","text-2xl","font-bold","text-green-500"),l.classList.add("text-green-500"),i.insertAdjacentHTML("beforeend",Or(a,s)),He.selectCount++,Qe();else{c.classList.remove("fa-check","text-2xl","font-bold","text-green-500"),l.classList.remove("text-green-500"),c.classList.add("fa-plus"),l.classList.add("text-teal-700");const m=i.querySelector(".attached-fields");m&&m.remove(),He.selectCount--}})}),R("log","Children auto-filled successfully"),removeFirstChild(e.length)}function Tr(){const e=ze.querySelectorAll(".edit-child-socks");let t=0;return e.forEach(n=>{n&&n.value==="1"&&t++}),t}let Ve=0;window.document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("childrenContainer"),t=document.getElementById("addChildBtn");let n=e.querySelectorAll(".child-entry").length-1;function r(){n=n+1;const i=n,f=document.createElement("div");f.className="child-entry pt-3 border border-teal-600 rounded-lg mt-4",f.innerHTML=`
            <div class="px-3 mb-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                <div>
                    <label class="block text-base font-semibold text-gray-900 mb-2">Name <span class="text-red-600">*</span></label>
                    <input type="text" name="child[${n}][name]" class="bg-teal-100 w-full px-4 py-2 border-2 border-teal-500 shadow rounded-lg font-semibold focus:outline-none focus:border-cyan-400 focus:shadow-none transition-all duration-300" placeholder="Jane" required/>
                </div>

                <div>
                    <label class="block text-base font-semibold text-gray-900 mb-2">Birthday <span class="text-red-600">*</span></label>
                    <div id="child-${n}-birthday" data-birthday-dropdown data-name="child[${n}][birthday]" required class="bg-teal-100 rounded-lg"></div>
                </div>

                <div>
                    <label class="block text-base font-semibold text-gray-900 mb-2">Playtime Duration <span class="text-red-600">*</span></label>
                    <div class="relative">
                        <select name="child[${n}][playDuration]" class="child-duration bg-teal-100 w-full px-4 py-2 border-2 border-teal-500 shadow rounded-lg font-semibold focus:outline-none focus:border-cyan-400 focus:shadow-none transition-all duration-300 cursor-pointer appearance-none" required>
                            <option value="1">1 Hour = 100</option>  
                            <option value="2">2 Hours = 200</option>
                            <option value="3">3 Hours = 300</option>
                            <option value="4">4 Hours = 400</option>
                            <option value="unlimited">Unlimited = 500</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-teal-500">
                            <i class="fa-solid fa-chevron-down text-sm"></i>
                        </div>
                    </div>
                </div>
                <div>
                    <label class="block text-base font-semibold text-gray-900 mb-2">Add Socks</label>
                    <div class="relative">
                        <select name="child[${n}][addSocks]" class="child-duration bg-teal-100 w-full px-4 py-2 border-2 border-teal-500 shadow rounded-lg font-semibold focus:outline-none focus:border-cyan-400 focus:shadow-none transition-all duration-300 cursor-pointer appearance-none">
                            <option value="0">No</option>
                            <option value="1">Yes</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-teal-500">
                            <i class="fa-solid fa-chevron-down text-sm"></i>
                        </div>
                    </div>
                </div>

                <!-- Child Photo Camera Capture -->
                <div>
                    <label class="block text-base font-semibold text-gray-900 mb-2">Child Photo</label>
                    <div id="child-${n}-photo" data-camera-input data-name="child[${n}][photo]" class="bg-teal-50 rounded-lg p-2 overflow-visible"></div>
                </div>
            </div>
            
            <div class="flex justify-start pt-2">
                <button type="button" class="remove-child text-sm font-bold text-white bg-red-600 hover:bg-red-500 px-4 py-1.5 rounded-tr-xl rounded-bl-lg shadow transition-all duration-200 flex items-center gap-2">
                    <i class="fa-solid fa-trash text-xs"></i> Remove
                </button>
            </div>
        `,o(f);const c=f.querySelector("[data-birthday-dropdown]");c&&_t(c);const l=f.querySelector("[data-camera-input]");return l&&Ft(l),{entry:f,index:i}}function o(i){const f=i.querySelector(".remove-child");f&&f.addEventListener("click",()=>{i.remove(),Ve--}),Ve++,Qe(!0)}function a(i){n=i,document.getElementById("first-child").remove()}window.removeFirstChild=a;function s(){const i=e.querySelectorAll('select[name$="[addSocks]"]');let f=0;return i.forEach(c=>{c&&c.value==="1"&&f++}),(f+Tr())*100}window.countSelectedSocks=s,t.addEventListener("click",()=>{const i=r();e.appendChild(i.entry),i.entry.querySelector(".child-first")})});function Nr(e){const n=e.value.trim().replace(/[\s\-\$\$]/g,"");return n&&/^(?:\+63|0)?9\d{9}$/.test(n)}window.validatePhone=Nr;function Ir(e,t,n){const r=document.getElementById(e);if(!r){R("error",`Step ${e} not found`);return}const o=document.getElementById("welcome-message");o&&o.remove();const a=document.createElement("div");a.id="welcome-message",a.className="text-center text-lg font-semibold mb-4 p-3 rounded-lg",t?(a.textContent=`Welcome back, ${n}!`,a.classList.add("bg-green-100","text-green-700","border","border-green-300")):(a.textContent="Welcome! New customer detected.",a.classList.add("bg-blue-100","text-blue-700","border","border-blue-300")),r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a)}window.showWelcomeMessageOnStep=Ir;function Pr(e=!1){const t=document.getElementById("phone");e?(t.setAttribute("readonly",!0),t.ariaReadOnly=!0):(t.removeAttribute("readonly"),t.ariaReadOnly=!1)}window.phoneReadOnly=Pr;async function Te(e,t,n="POST",r=null){try{const o=n!=="POST"?`${e}/${r}`:e;return await(await fetch(o,{method:n.toUpperCase(),headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(t)})).json()}catch(o){throw o}}async function zt(e,t,n=null){try{const r=n.length===0?t:`${t}/${n}`,o={method:e.toUpperCase(),headers:{"Content-Type":"application/json",Accept:"application/json"}};if(e==="DELETE"){const s=document.querySelector('meta[name="csrf-token"]').getAttribute("content");o.headers["X-CSRF-TOKEN"]=s}return await(await fetch(r,o)).json()}catch(r){throw r}}const qe=document.getElementById("otp-choices"),z=document.getElementById("otp-message");let $r=!1,te=0;window.correctCode=$r;window.storePhone=te;let Je=0;function Dr(e,t){if(R("log","generateOtpChoices called with:",`${e}, ${t}`),!qe){R("error","OTP container not found!");return}qe.innerHTML="",z.textContent="",z.className="text-center min-h-[24px] font-medium";const n=Vt(e);let r=[e,...n];r=Ur(r),r.forEach(o=>{const a=document.createElement("button");a.type="button",a.className="w-30 otp-choice bg-gray-50 border-2 border-gray-300 rounded-lg shadow p-2 text-xl font-bold text-gray-800 cursor-pointer transition-all hover:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500",a.innerHTML=`
            <span>${o[0]}</span>
            <span>${o[1]}</span>
            <span>${o[2]}</span>
        `,a.dataset.otp=o,a.addEventListener("click",async()=>{document.querySelectorAll(".otp-choice").forEach(i=>{i.disabled=!0,i.classList.remove("border-green-500","border-red-500","bg-green-50","bg-red-50"),i.classList.add("border-gray-300","opacity-70")});const s=await Te(Z.verifyOtpURL,{otp:o},"PATCH",te);s.isCorrectOtp?(a.classList.remove("border-gray-300","opacity-70"),a.classList.add("border-green-500","bg-green-50"),z.textContent=" Correct!",z.className="text-center text-green-600 font-medium",window.correctCode=!0,phoneReadOnly(!0),s.isOldUser&&(q.isOldUser=s.isOldUser,q.phoneNumber=s.phoneNum),q.oldUserLoaded||setTimeout(async()=>{if(s.isOldUser){let i=null;s.returneeData&&(s.returneeData.data||s.returneeData.parent)?i=s.returneeData:s.phoneNum&&(i=await zt("GET",Z.searchReturneeURL,q.phoneNumber),q.returneeData=i,R("log","Returnee data: ",i)),window.showSteps&&(i&&(Ar(i),Br()),window.showSteps(2,"next"),await new Promise(f=>setTimeout(f,300)),window.showSteps(3,"next"),await new Promise(f=>setTimeout(f,300)),i&&i.oldUserData.children.length>=1&&kr(i.oldUserData.children,i.oldUserData.d_name))}else if(window.showSteps){const i=window.getCurrentStep?window.getCurrentStep():0;window.showSteps(i+1,"next")}},500)):(a.classList.remove("border-gray-300","opacity-70"),a.classList.add("border-red-500","bg-red-50"),z.textContent=" Incorrect code. Please try again.",z.className="text-center text-red-500 font-medium",setTimeout(()=>{document.querySelectorAll(".otp-choice").forEach(i=>{i.disabled=!1,i.classList.remove("opacity-70")})},500),_r(t))}),qe.appendChild(a)})}function Vt(e){const t=e.split(""),n=[],r=Math.floor(Math.random()*3),o=[...t];o[r]=String((parseInt(o[r])+1)%10),n.push(o.join(""));const a=[...t],s=Math.floor(Math.random()*2);[a[s],a[s+1]]=[a[s+1],a[s]];const i=a.join("");return i===e||i===n[0]?Vt(e):(n.push(i),n)}function Ur(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}async function qr(e){if(R("log","generateOtp called with:",e),R("log","Current storePhone:",te),te!==0&&te===e){R("log","Same phone number, skipping OTP generation");return}te=e,Je=0,R("log","Calling makeOtp API with URL:",Z.makeOtpURL);try{const t={phone:e};R("log","Sending data:",t);const n=await Te(Z.makeOtpURL,t);R("log","OTP response:",n),R("log","OTP: ",n.code,!0),n&&n.code?Dr(n.code,n.id,e):(R("error","No OTP code returned or error:",n),z.textContent="Error generating OTP. Please try again.",z.className="text-center text-red-600 font-medium")}catch(t){R("error","Error calling makeOtp API:",t),R("error","Error message:",t.message),z.textContent="Error generating OTP. Please try again.",z.className="text-center text-red-600 font-medium"}}window.generateOtp=qr;function _r(e){Je++,Je==2&&(z.textContent="Multiple Attempts. Terminating form",z.className="text-center text-red-500 font-medium",document.querySelectorAll(".otp-choice").forEach(t=>{t.disabled=!0,t.classList.remove("border-green-500","border-red-500","bg-green-50","bg-red-50"),t.classList.add("border-gray-300","opacity-70")}),setTimeout(async()=>{await zt("DELETE",Z.deleteOtpURL,[e]),location.reload()},1e3))}document.addEventListener("DOMContentLoaded",()=>{});function Fr(e){const t={};for(const r in e){const o=e[r]===""?null:e[r],a=r.match(/[^\[\]]+/g);let s=t;a.forEach((i,f)=>{f===a.length-1?s[i]=o:(s[i]||(s[i]=/^\d+$/.test(a[f+1])?[]:{}),s=s[i])})}function n(r){if(typeof r!="object"||r===null)return r;const o=Object.keys(r);if(o.every(a=>/^\d+$/.test(a)))return o.map(a=>n(r[a]));{const a={};for(const s in r)a[s]=n(r[s]);return a}}return n(t)}function Mr(e=null){const t=document.getElementById("modal-container"),n=document.getElementById("modal-title"),r=document.getElementById("items-subcat-container");if(!t){showConsole("error","Modal container not found");return}document.querySelectorAll(".close-modal").forEach(b=>{b.onclick=()=>t.classList.add("hidden")}),n.textContent="Review & Edit Your Information",r.innerHTML="";const a=document.createElement("div");a.className="space-y-4";const s=e?.parent||{},i=e?.guardian||null,f=document.createElement("div");f.className="bg-gradient-to-r from-teal-50 to-white rounded-xl p-4 mb-4 border border-teal-100";let c=`
        <div class="flex items-center gap-2 mb-4">
            <div class="bg-teal-100 p-2 rounded-lg">
                <svg class="w-5 h-5 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
            </div>
            <h4 class="font-bold text-teal-800 text-lg">Parent Information</h4>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="text-sm font-semibold text-gray-600 block mb-1">First Name</label>
                <input type="text" id="edit-parentName" class="w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 transition-all" value="${s.first_name||""}">
            </div>
            <div>
                <label class="text-sm font-semibold text-gray-600 block mb-1">Last Name</label>
                <input type="text" id="edit-parentLastName" class="w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 transition-all" value="${s.last_name||""}">
            </div>
            <div class="md:col-span-2">
                <label class="text-sm font-semibold text-gray-600 block mb-1">Email</label>
                <input type="email" id="edit-parentEmail" class="w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 transition-all" value="${s.email||""}">
            </div>
            <div>
                <label class="text-sm font-semibold text-gray-600 block mb-1">Phone</label>
                <input type="tel" id="edit-phone" class="w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 transition-all" value="${e?.phone||""}">
            </div>
            <div>
                <label class="text-sm font-semibold text-gray-600 block mb-1">Birthday</label>
                <div id="edit-parentBirthday">
                    ${yt("parentBirthday",s.birthday)}
                </div>
            </div>
        </div>
    `;if(i&&(i.first_name||i.last_name)&&(c+=`
            <div class="mt-4 pt-4 border-t border-teal-200">
                <div class="flex items-center gap-2 mb-4">
                    <div class="bg-purple-100 p-2 rounded-lg">
                        <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                        </svg>
                    </div>
                    <h4 class="font-bold text-purple-800 text-lg">Guardian Information</h4>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="text-sm font-semibold text-gray-600 block mb-1">First Name</label>
                        <input type="text" id="edit-guardianName" class="w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all" value="${i.first_name||""}">
                    </div>
                    <div>
                        <label class="text-sm font-semibold text-gray-600 block mb-1">Last Name</label>
                        <input type="text" id="edit-guardianLastName" class="w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all" value="${i.last_name||""}">
                    </div>
                    <div class="md:col-span-2">
                        <label class="text-sm font-semibold text-gray-600 block mb-1">Phone</label>
                        <input type="tel" id="edit-guardianPhone" class="w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all" value="${i.phone||""}">
                    </div>
                </div>
            </div>
        `),f.innerHTML=c,a.appendChild(f),e?.children&&e.children.length>0){const b=document.createElement("div");b.className="bg-gradient-to-r from-amber-50 to-white rounded-xl p-4 border border-amber-100";let C=`
            <div class="flex items-center gap-2 mb-4">
                <div class="bg-amber-100 p-2 rounded-lg">
                    <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                </div>
                <h4 class="font-bold text-amber-800 text-lg">Children Information</h4>
            </div>
        `;e.children.forEach((u,y)=>{C+=`
                <div class="bg-white rounded-xl p-4 mb-3 shadow-sm border border-amber-100">
                    <div class="flex items-center justify-between mb-3">
                        <span class="bg-amber-100 text-amber-700 font-bold px-3 py-1 rounded-full text-sm">Child ${y+1}</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="text-sm font-semibold text-gray-600 block mb-1">Name</label>
                            <input type="text" class="edit-child-name w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 transition-all" data-child-index="${y}" value="${u.name||""}">
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600 block mb-1">Birthday</label>
                            <div class="birthday-edit-wrapper" data-child-index="${y}">
                                ${yt(`childBirthday${y}`,u.birthday)}
                            </div>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600 block mb-1">Play Duration</label>
                            <select class="edit-child-duration w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 transition-all bg-white" data-child-index="${y}">
                                <option value="1" ${u.playtime_duration==="1"?"selected":""}>1 hour = &#8369;100</option>
                                <option value="2" ${u.playtime_duration==="2"?"selected":""}>2 hours = &#8369;200</option>
                                <option value="3" ${u.playtime_duration==="3"?"selected":""}>3 hours = &#8369;300</option>
                                <option value="4" ${u.playtime_duration==="4"?"selected":""}>4 hours = &#8369;400</option>
                                <option value="unlimited" ${u.playtime_duration==="unlimited"?"selected":""}>Unlimited = &#8369;500</option>
                            </select>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600 block mb-1">Add Socks (&#8369;50)</label>
                            <select class="edit-child-socks w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 transition-all bg-white" data-child-index="${y}">
                                <option value="0" ${u.add_socks?"":"selected"}>No</option>
                                <option value="1" ${u.add_socks?"selected":""}>Yes</option>
                            </select>
                        </div>
                    </div>
                </div>
            `}),b.innerHTML=C,a.appendChild(b)}r.appendChild(a);const l=document.getElementById("save-btn"),m=l.cloneNode(!0);l.parentNode.replaceChild(m,l),m.addEventListener("click",()=>{const b=document.getElementById("edit-parentName"),C=document.getElementById("edit-parentLastName"),u=document.getElementById("edit-parentEmail"),y=document.getElementById("edit-phone");if(document.getElementById("edit-parentBirthday"),b){const p=document.getElementById("parentName");p&&(p.value=b.value)}if(C){const p=document.getElementById("parentLastName");p&&(p.value=C.value)}if(u){const p=document.getElementById("parentEmail");p&&(p.value=u.value)}if(y){const p=document.getElementById("phone");p&&(p.value=y.value)}const h=document.getElementById("edit-guardianName"),E=document.getElementById("edit-guardianLastName"),w=document.getElementById("edit-guardianPhone");if(h||E||w){const p=document.getElementById("add-guardian-checkbox");if(p&&p.click(),h){const g=document.getElementById("guardianName");g&&(g.value=h.value)}if(E){const g=document.getElementById("guardianLastName");g&&(g.value=E.value)}if(w){const g=document.getElementById("guardianPhone");g&&(g.value=w.value)}}const v=document.querySelector("#edit-parentBirthday");if(v){const p=v.querySelector(".birthday-month-select"),g=v.querySelector(".birthday-day-select"),S=v.querySelector(".birthday-year-select"),x=document.getElementById("parentBirthday");if(x&&p&&g&&S){const O=p.value,T=g.value,D=S.value;if(O&&T&&D){const B=`${D}-${O}-${T}`;x.dataset.birthdayValue=B;const A=x.querySelector('input[type="hidden"]');A&&(A.value=B),x.classList.remove("birthday-invalid"),x.classList.add("birthday-valid"),x.setAttribute("data-birthday-valid","true")}}}document.querySelectorAll(".edit-child-name").forEach(p=>{const g=p.dataset.childIndex,S=document.querySelectorAll(".child-entry");if(S[g]){const x=S[g].querySelector('input[name*="[name]"]');x&&(x.value=p.value)}}),document.querySelectorAll(".birthday-edit-wrapper").forEach(p=>{const g=p.dataset.childIndex,S=p.querySelector(".birthday-month-select"),x=p.querySelector(".birthday-day-select"),O=p.querySelector(".birthday-year-select");if(S&&x&&O){const T=S.value,D=x.value,B=O.value,A=document.querySelectorAll(".child-entry");if(A[g]){const I=A[g].querySelector("[data-birthday-dropdown]");if(I&&T&&D&&B){const U=`${B}-${T}-${D}`;I.dataset.birthdayValue=U;const J=I.querySelector('input[type="hidden"]');J&&(J.value=U),I.classList.remove("birthday-invalid"),I.classList.add("birthday-valid"),I.setAttribute("data-birthday-valid","true")}}}}),document.querySelectorAll(".edit-child-duration").forEach(p=>{const g=p.dataset.childIndex,S=document.querySelectorAll(".child-entry");if(S[g]){const x=S[g].querySelector('select[name*="[playDuration]"]');x&&(x.value=p.value)}}),document.querySelectorAll(".edit-child-socks").forEach(p=>{const g=p.dataset.childIndex,S=document.querySelectorAll(".child-entry");if(S[g]){const x=S[g].querySelector('select[name*="[addSocks]"]');if(x)x.value=p.value;else{const O=S[g].querySelector('input[name*="[addSocks]"]');O&&(O.value=p.value)}}}),t.classList.add("hidden"),window.populateSummary&&window.populateSummary()}),t.classList.remove("hidden")}window.API_ROUTES=Z;window.submitData=Te;document.addEventListener("DOMContentLoaded",function(){window.showSteps=u,window.getCurrentStep=()=>l,window.getSteps=()=>t,window.populateSummary=y,window.openEditModal=Mr;const e=document.getElementById("playhouse-registration-form"),t=document.querySelectorAll(".step"),n=document.getElementById("prev-btn"),r=document.getElementById("next-btn"),o=document.getElementById("submit-btn"),a=document.getElementById("filled-line"),s=[document.getElementById("step-1-num"),document.getElementById("step-2-num"),document.getElementById("step-3-num"),document.getElementById("step-4-num"),document.getElementById("step-5-num")],i=[document.getElementById("step-1-text"),document.getElementById("step-2-text"),document.getElementById("step-3-text"),document.getElementById("step-4-text"),document.getElementById("step-5-text")],f=document.getElementById("phone"),c=document.getElementById("next-btn");let l=0,m="";f&&c&&(c.disabled=!0);const b=(()=>{try{return new ke("agree-checkbox-phone","check-agree-icon-phone","check-agree-info-phone")}catch{return null}})();window.updateNextBtnState=function(){if(C()!=="phone"){c&&(c.disabled=!1);return}const w=f?f.checkValidity():!1,v=b?b.isChecked():!1;c&&(c.disabled=!(w&&v))},f&&f.addEventListener("input",()=>{window.updateNextBtnState&&window.updateNextBtnState()}),b&&b.onChange(()=>{window.updateNextBtnState&&window.updateNextBtnState()}),r&&r.addEventListener("click",async()=>{const E=t[l],w=E.querySelectorAll("input[required], select[required]");let v=!0,p=!0,g=!0,S=!0;w.forEach(x=>{x.id==="phone"?(R("log","Phone input detected, validating..."),validatePhone(x)?(R("log","Phone validation passed, calling generateOtp"),x.classList.remove("border-red-500"),generateOtp(x.value)):(R("log","Phone validation failed"),x.classList.remove("border-teal-500"),x.classList.add("border-red-500"),p=!1)):x.checkValidity()?(x.classList.remove("border-red-600"),x.classList.add("border-teal-500")):(x.classList.remove("border-teal-500"),x.classList.add("border-red-600"),p=!1)}),Cr(E),!(C()==="otp"&&(correctCode||(v=!1),R("log","OTP step - oldUser.isOldUser:",q.isOldUser),R("log","OTP step - oldUser.oldUserLoaded:",q.oldUserLoaded),R("log","OTP step - oldUser.phoneNumber:",q.phoneNumber),q.isOldUser&&!q.oldUserLoaded))&&(C()==="parent"&&(g=ht(E),(!g||!p)&&(v=!1)),C()==="children"&&(S=ht(E),(!S||!p)&&(v=!1),q.isOldUser&&Ve===0&&(v=Qe())),v&&l<t.length-1&&(u(l+1,"next"),l+1===t.length-1&&y()))}),n&&n.addEventListener("click",()=>{C()==="children"&&Ue(!1),u(l-1,"prev")}),e&&e.addEventListener("submit",async E=>{E.preventDefault(),R("log","Form submition active");const w=new FormData(e),v=Fr(Object.fromEntries(w.entries()));R("log","Before submit: ",v),m=await Te(Z.submitURL,v),R("log","Reply from Backend",m),m.isFormSubmitted&&h(m.orderNum)});function C(){return t[l].dataset.step}window.getCurrentStepName=C;function u(E,w="next",v=null){const p=t[l];let g=l,S=t[0];s.forEach((O,T)=>{T<=E?(O.classList.remove("border-gray-300","bg-white","text-gray-500"),O.classList.add("border-teal-300","bg-amber-200","text-teal-500")):(O.classList.remove("border-teal-300","bg-amber-200","text-teal-500"),O.classList.add("border-gray-300","bg-white","text-gray-500"))}),i.forEach((O,T)=>{T===E?(O.classList.remove("text-gray-700"),O.classList.add("text-teal-500")):(O.classList.remove("text-teal-500"),O.classList.add("text-gray-700"))});const x=E/(t.length-1)*100;if(a.style.width=`${x}%`,w==="next"&&l<t.length-1)g=v?l+v:l+1;else if(w==="prev"&&l>0)g=v?l-v:l-1;else return;g=Math.max(0,Math.min(g,t.length-1)),S=t[g],w==="next"?(p.classList.remove("slide-in-left","slide-in-right"),p.classList.add("slide-out-left")):w==="prev"&&(p.classList.remove("slide-in-left","slide-in-right"),p.classList.add("slide-out-right")),setTimeout(()=>{p.classList.add("hidden"),p.classList.remove("slide-out-left","slide-out-right"),S.classList.remove("hidden"),w==="next"?(S.classList.remove("slide-out-right"),S.classList.add("slide-in-right")):w==="prev"&&(S.classList.remove("slide-out-left"),S.classList.add("slide-in-left")),l=g,n.classList.toggle("hidden",l===0),r.classList.toggle("hidden",l===t.length-1),o.classList.toggle("hidden",l!==t.length-1),window.updateNextBtnState&&window.updateNextBtnState()},300)}function y(){const E=document.getElementById("summaryContainer"),w=new FormData(document.getElementById("playhouse-registration-form"));let v=w.get("parentEmail")?`(${w.get("parentEmail")})`:"",p=w.get("guardianPhone")?`(${w.get("guardianPhone")})`:"";const g=document.getElementById("parentBirthday-hidden"),S=g.value?ne("shortDate",g.value):"-";let x="",O="",T=0,D=!1;const B={1:100,2:200,3:300,4:400,unlimited:500};document.querySelectorAll(".child-entry").forEach((N,M)=>{const Y=N.querySelector('input[name*="[name]"]'),W=N.querySelector('input[name*="[birthday]"]'),K=N.querySelector('select[name*="[playDuration]"]'),ie=N.querySelector('select[name*="[addSocks]"]'),he=Y?Y.value:"Child",Ne=W?W.value:"-",ye=K?K.value:"",Jt=ie&&ie.value==="1"?"Socks Added":"",Wt={1:"1 hr = 100",2:"2 hrs = 200",3:"3 hrs = 300",4:"4 hrs = 400",unlimited:"Unlimited = 500"}[ye]||ye;B[ye]&&(T+=B[ye]),x+=`
                        <div class="bg-teal-50 border border-teal-200 rounded p-3">
                            <p class="text-sm text-gray-600">Name: <span class="font-bold text-gray-900">${he}</span></p> 
							<p class="text-sm text-gray-600 mt-1">Birthday: <span class="font-medium text-gray-900">${ne("shortDate",Ne)}</span></p>
							<p class="text-sm text-gray-600 mt-1">Duration: <span class="font-medium text-gray-900">${Wt}</span></p>
                            <p class="text-sm text-gray-900 font-bold mt-1">${Jt}</p>
                        </div>
                `});const A=countSelectedSocks(),I=T+A;oe.isChecked()&&(O=`
                    <div class="flex items-center border-b border-cyan-400 py-2 max-w-full overflow-auto">
                        <span class="font-semibold text-cyan-800 w-fit">Guardian:&nbsp;</span>
                        <span class="text-gray-900 font-medium">${w.get("guardianName")} ${w.get("guardianLastName")} ${p}</span>
                    </div>
                `);const U=w.get("parentName")||"",J=w.get("parentLastName")||"",P=[U,J].filter(N=>N).join(" ")||"-";E.innerHTML=`
                    <div class="flex items-center border-b border-cyan-400 py-2 max-w-full overflow-auto">
                        <span class="font-semibold text-cyan-800 w-fit">Parent:&nbsp;</span>
                        <span class="text-gray-900 font-medium">${P} ${v}</span>
                    </div>
                    <div class="flex items-start border-b border-cyan-400 py-2">
                        <span class="font-semibold text-cyan-800 w-fit">Phone:&nbsp;</span>
                        <span class="text-gray-900 font-medium">${w.get("phone")}</span>
                    </div>
                    <div class="flex items-center border-b border-cyan-400 py-2">
                        <span class="font-semibold text-cyan-800 w-fit">Birthdate:&nbsp;</span>
                        <span class="text-gray-900 font-medium">${w.get("parentBirthday")?ne("shortDate",w.get("parentBirthday")):S}</span>
                    </div>
                    ${O}
                    <div class="pb-3">
                        <span class="font-semibold text-cyan-800 block mb-3">Children:</span>
                        <div id="summary-children-list" class="space-y-3 ml-2">
                            ${x}
                        </div>
                    </div>
                    <div class="mt-6 pt-4 border-t-2 border-cyan-400 space-y-4">
                        <div class="bg-gradient-to-r from-teal-100 to-cyan-100 border-2 border-teal-400 rounded-lg p-4">
                            <p class="text-lg font-bold text-teal-800 mb-2">DISCOUNT CODE</p>
                            <p class="text-xs text-gray-600 mb-3">Got a discount? Enter it below  and come back soon for more offers!</p>
                            <div class="flex flex-col sm:flex-row gap-3">
                                <input type="text" id="discount-code-input" name="discountCode" placeholder="Enter code" class="flex-1 min-h-[44px] px-4 py-3 text-base border-2 border-teal-300 rounded-lg focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all">
                                <button type="button" id="apply-discount-btn" class="min-h-[44px] px-5 py-3 text-base font-semibold text-white bg-teal-600 hover:bg-teal-700 rounded-lg transition-colors touch-manipulation">Apply</button>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-teal-100 to-cyan-100 border-2 border-teal-400 rounded-lg p-4">
                            <p class="text-lg font-bold text-teal-800">OVERALL TOTAL: <span class="text-2xl text-cyan-600">${I}</span></p>
                            <p class="text-xs text-gray-600 mt-2">Children: ${T} | Item: ${A}</p>
                        </div>
                    </div>
                    <div class="mt-4 flex justify-end">
                        <button type="button" id="edit-review-btn" class="inline-flex items-center px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors">
                            <i class="fa-solid fa-pen-to-square mr-2"></i>Edit Review
                        </button>
                    </div>
            `;const ae=document.getElementById("discount-code-input"),j=document.getElementById("apply-discount-btn");let ee=!1;j.addEventListener("click",()=>{ee=!ee,ee?(ae.setAttribute("readonly",!0),j.textContent="Edit"):(ae.removeAttribute("readonly"),j.textContent="Apply")}),w.get("parentBirthday")&&(D=!0);const pe=document.getElementById("edit-review-btn");pe&&pe.addEventListener("click",()=>{const N={parent:{first_name:w.get("parentName"),last_name:w.get("parentLastName"),email:w.get("parentEmail"),birthday:w.get("parentBirthday")},phone:w.get("phone"),guardian:oe.isChecked()?{first_name:w.get("guardianName"),last_name:w.get("guardianLastName"),phone:w.get("guardianPhone")}:null,children:[]};document.querySelectorAll(".child-entry").forEach(M=>{const Y=M.querySelector('input[name*="[name]"]'),W=M.querySelector('input[name*="[birthday]"]'),K=M.querySelector('select[name*="[playDuration]"]'),ie=M.querySelector('select[name*="[addSocks]"]'),he=M.querySelector('[id*="add-socks-child-icon"]'),Ne=ie&&ie.value==="1"||he&&he.classList.contains("fa-check-square");N.children.push({name:Y?Y.value:"",birthday:W?W.value:"",playtime_duration:K?K.value:"",add_socks:Ne})}),window.openEditModal(N)}),b.isChecked()&&(o.disabled=!1),R("log","Is Parent Birthdate filled? ",D),D?Ue(!1):Ue()}function h(E){const w=document.getElementById("qr-container"),v=document.getElementById("order-number-text"),p=document.getElementById("qr-image");e.classList.add("hidden"),i.forEach(S=>{S.classList.remove("text-gray-700"),S.classList.add("text-teal-500")}),w.classList.remove("hidden"),v.textContent=E,p.innerHTML="";const g=document.getElementById("order-info-link");g&&(g.href=`/order-info/${E}`,g.classList.remove("hidden")),new QRCode(p,{text:E,width:150,height:150})}});

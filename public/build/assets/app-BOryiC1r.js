import{s as R,A as ne,a as Je,g as bt}from"./requestApi-BwZmc0wH.js";function gt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Yt}=Object.prototype,{getPrototypeOf:We}=Object,{iterator:Ce,toStringTag:vt}=Symbol,Re=(e=>t=>{const n=Yt.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),V=e=>(e=e.toLowerCase(),t=>Re(t)===e),Be=e=>t=>typeof t===e,{isArray:se}=Array,re=Be("undefined");function de(e){return e!==null&&!re(e)&&e.constructor!==null&&!re(e.constructor)&&_(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const xt=V("ArrayBuffer");function Kt(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&xt(e.buffer),t}const Gt=Be("string"),_=Be("function"),wt=Be("number"),ce=e=>e!==null&&typeof e=="object",Xt=e=>e===!0||e===!1,ge=e=>{if(Re(e)!=="object")return!1;const t=We(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(vt in e)&&!(Ce in e)},Qt=e=>{if(!ce(e)||de(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Zt=V("Date"),en=V("File"),tn=V("Blob"),nn=V("FileList"),rn=e=>ce(e)&&_(e.pipe),on=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||_(e.append)&&((t=Re(e))==="formdata"||t==="object"&&_(e.toString)&&e.toString()==="[object FormData]"))},sn=V("URLSearchParams"),[an,ln,dn,cn]=["ReadableStream","Request","Response","Headers"].map(V),un=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ue(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),se(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{if(de(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),a=s.length;let i;for(r=0;r<a;r++)i=s[r],t.call(null,e[i],i,e)}}function Et(e,t){if(de(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const G=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,St=e=>!re(e)&&e!==G;function Ue(){const{caseless:e,skipUndefined:t}=St(this)&&this||{},n={},r=(o,s)=>{if(s==="__proto__"||s==="constructor"||s==="prototype")return;const a=e&&Et(n,s)||s;ge(n[a])&&ge(o)?n[a]=Ue(n[a],o):ge(o)?n[a]=Ue({},o):se(o)?n[a]=o.slice():(!t||!re(o))&&(n[a]=o)};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&ue(arguments[o],r);return n}const fn=(e,t,n,{allOwnKeys:r}={})=>(ue(t,(o,s)=>{n&&_(o)?Object.defineProperty(e,s,{value:gt(o,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),e),mn=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),pn=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},hn=(e,t,n,r)=>{let o,s,a;const i={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),s=o.length;s-- >0;)a=o[s],(!r||r(a,e,t))&&!i[a]&&(t[a]=e[a],i[a]=!0);e=n!==!1&&We(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},yn=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},bn=e=>{if(!e)return null;if(se(e))return e;let t=e.length;if(!wt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},gn=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&We(Uint8Array)),vn=(e,t)=>{const r=(e&&e[Ce]).call(e);let o;for(;(o=r.next())&&!o.done;){const s=o.value;t.call(e,s[0],s[1])}},xn=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},wn=V("HTMLFormElement"),En=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),Ze=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Sn=V("RegExp"),Lt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ue(n,(o,s)=>{let a;(a=t(o,s,e))!==!1&&(r[s]=a||o)}),Object.defineProperties(e,r)},Ln=e=>{Lt(e,(t,n)=>{if(_(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(_(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Cn=(e,t)=>{const n={},r=o=>{o.forEach(s=>{n[s]=!0})};return se(e)?r(e):r(String(e).split(t)),n},Rn=()=>{},Bn=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function On(e){return!!(e&&_(e.append)&&e[vt]==="FormData"&&e[Ce])}const An=e=>{const t=new Array(10),n=(r,o)=>{if(ce(r)){if(t.indexOf(r)>=0)return;if(de(r))return r;if(!("toJSON"in r)){t[o]=r;const s=se(r)?[]:{};return ue(r,(a,i)=>{const f=n(a,o+1);!re(f)&&(s[i]=f)}),t[o]=void 0,s}}return r};return n(e,0)},Nn=V("AsyncFunction"),kn=e=>e&&(ce(e)||_(e))&&_(e.then)&&_(e.catch),Ct=((e,t)=>e?setImmediate:t?((n,r)=>(G.addEventListener("message",({source:o,data:s})=>{o===G&&s===n&&r.length&&r.shift()()},!1),o=>{r.push(o),G.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",_(G.postMessage)),Tn=typeof queueMicrotask<"u"?queueMicrotask.bind(G):typeof process<"u"&&process.nextTick||Ct,In=e=>e!=null&&_(e[Ce]),d={isArray:se,isArrayBuffer:xt,isBuffer:de,isFormData:on,isArrayBufferView:Kt,isString:Gt,isNumber:wt,isBoolean:Xt,isObject:ce,isPlainObject:ge,isEmptyObject:Qt,isReadableStream:an,isRequest:ln,isResponse:dn,isHeaders:cn,isUndefined:re,isDate:Zt,isFile:en,isBlob:tn,isRegExp:Sn,isFunction:_,isStream:rn,isURLSearchParams:sn,isTypedArray:gn,isFileList:nn,forEach:ue,merge:Ue,extend:fn,trim:un,stripBOM:mn,inherits:pn,toFlatObject:hn,kindOf:Re,kindOfTest:V,endsWith:yn,toArray:bn,forEachEntry:vn,matchAll:xn,isHTMLForm:wn,hasOwnProperty:Ze,hasOwnProp:Ze,reduceDescriptors:Lt,freezeMethods:Ln,toObjectSet:Cn,toCamelCase:En,noop:Rn,toFiniteNumber:Bn,findKey:Et,global:G,isContextDefined:St,isSpecCompliantForm:On,toJSONObject:An,isAsyncFn:Nn,isThenable:kn,setImmediate:Ct,asap:Tn,isIterable:In};let L=class Rt extends Error{static from(t,n,r,o,s,a){const i=new Rt(t.message,n||t.code,r,o,s);return i.cause=t,i.name=t.name,a&&Object.assign(i,a),i}constructor(t,n,r,o,s){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),r&&(this.config=r),o&&(this.request=o),s&&(this.response=s,this.status=s.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:d.toJSONObject(this.config),code:this.code,status:this.status}}};L.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";L.ERR_BAD_OPTION="ERR_BAD_OPTION";L.ECONNABORTED="ECONNABORTED";L.ETIMEDOUT="ETIMEDOUT";L.ERR_NETWORK="ERR_NETWORK";L.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";L.ERR_DEPRECATED="ERR_DEPRECATED";L.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";L.ERR_BAD_REQUEST="ERR_BAD_REQUEST";L.ERR_CANCELED="ERR_CANCELED";L.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";L.ERR_INVALID_URL="ERR_INVALID_URL";const Pn=null;function _e(e){return d.isPlainObject(e)||d.isArray(e)}function Bt(e){return d.endsWith(e,"[]")?e.slice(0,-2):e}function et(e,t,n){return e?e.concat(t).map(function(o,s){return o=Bt(o),!n&&s?"["+o+"]":o}).join(n?".":""):t}function Dn(e){return d.isArray(e)&&!e.some(_e)}const $n=d.toFlatObject(d,{},null,function(t){return/^is[A-Z]/.test(t)});function Oe(e,t,n){if(!d.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=d.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,h){return!d.isUndefined(h[y])});const r=n.metaTokens,o=n.visitor||l,s=n.dots,a=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&d.isSpecCompliantForm(t);if(!d.isFunction(o))throw new TypeError("visitor must be a function");function u(c){if(c===null)return"";if(d.isDate(c))return c.toISOString();if(d.isBoolean(c))return c.toString();if(!f&&d.isBlob(c))throw new L("Blob is not supported. Use a Buffer instead.");return d.isArrayBuffer(c)||d.isTypedArray(c)?f&&typeof Blob=="function"?new Blob([c]):Buffer.from(c):c}function l(c,y,h){let E=c;if(c&&!h&&typeof c=="object"){if(d.endsWith(y,"{}"))y=r?y:y.slice(0,-2),c=JSON.stringify(c);else if(d.isArray(c)&&Dn(c)||(d.isFileList(c)||d.endsWith(y,"[]"))&&(E=d.toArray(c)))return y=Bt(y),E.forEach(function(v,p){!(d.isUndefined(v)||v===null)&&t.append(a===!0?et([y],p,s):a===null?y:y+"[]",u(v))}),!1}return _e(c)?!0:(t.append(et(h,y,s),u(c)),!1)}const m=[],b=Object.assign($n,{defaultVisitor:l,convertValue:u,isVisitable:_e});function C(c,y){if(!d.isUndefined(c)){if(m.indexOf(c)!==-1)throw Error("Circular reference detected in "+y.join("."));m.push(c),d.forEach(c,function(E,x){(!(d.isUndefined(E)||E===null)&&o.call(t,E,d.isString(x)?x.trim():x,y,b))===!0&&C(E,y?y.concat(x):[x])}),m.pop()}}if(!d.isObject(e))throw new TypeError("data must be an object");return C(e),t}function tt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Ye(e,t){this._pairs=[],e&&Oe(e,this,t)}const Ot=Ye.prototype;Ot.append=function(t,n){this._pairs.push([t,n])};Ot.toString=function(t){const n=t?function(r){return t.call(this,r,tt)}:tt;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function qn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function At(e,t,n){if(!t)return e;const r=n&&n.encode||qn,o=d.isFunction(n)?{serialize:n}:n,s=o&&o.serialize;let a;if(s?a=s(t,o):a=d.isURLSearchParams(t)?t.toString():new Ye(t,o).toString(r),a){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class nt{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){d.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Ke={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},Un=typeof URLSearchParams<"u"?URLSearchParams:Ye,_n=typeof FormData<"u"?FormData:null,Fn=typeof Blob<"u"?Blob:null,Mn={isBrowser:!0,classes:{URLSearchParams:Un,FormData:_n,Blob:Fn},protocols:["http","https","file","blob","url","data"]},Ge=typeof window<"u"&&typeof document<"u",Fe=typeof navigator=="object"&&navigator||void 0,Hn=Ge&&(!Fe||["ReactNative","NativeScript","NS"].indexOf(Fe.product)<0),jn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zn=Ge&&window.location.href||"http://localhost",Vn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ge,hasStandardBrowserEnv:Hn,hasStandardBrowserWebWorkerEnv:jn,navigator:Fe,origin:zn},Symbol.toStringTag,{value:"Module"})),D={...Vn,...Mn};function Jn(e,t){return Oe(e,new D.classes.URLSearchParams,{visitor:function(n,r,o,s){return D.isNode&&d.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function Wn(e){return d.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Yn(e){const t={},n=Object.keys(e);let r;const o=n.length;let s;for(r=0;r<o;r++)s=n[r],t[s]=e[s];return t}function Nt(e){function t(n,r,o,s){let a=n[s++];if(a==="__proto__")return!0;const i=Number.isFinite(+a),f=s>=n.length;return a=!a&&d.isArray(o)?o.length:a,f?(d.hasOwnProp(o,a)?o[a]=[o[a],r]:o[a]=r,!i):((!o[a]||!d.isObject(o[a]))&&(o[a]=[]),t(n,r,o[a],s)&&d.isArray(o[a])&&(o[a]=Yn(o[a])),!i)}if(d.isFormData(e)&&d.isFunction(e.entries)){const n={};return d.forEachEntry(e,(r,o)=>{t(Wn(r),o,n,0)}),n}return null}function Kn(e,t,n){if(d.isString(e))try{return(t||JSON.parse)(e),d.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const fe={transitional:Ke,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,s=d.isObject(t);if(s&&d.isHTMLForm(t)&&(t=new FormData(t)),d.isFormData(t))return o?JSON.stringify(Nt(t)):t;if(d.isArrayBuffer(t)||d.isBuffer(t)||d.isStream(t)||d.isFile(t)||d.isBlob(t)||d.isReadableStream(t))return t;if(d.isArrayBufferView(t))return t.buffer;if(d.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Jn(t,this.formSerializer).toString();if((i=d.isFileList(t))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Oe(i?{"files[]":t}:t,f&&new f,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),Kn(t)):t}],transformResponse:[function(t){const n=this.transitional||fe.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(d.isResponse(t)||d.isReadableStream(t))return t;if(t&&d.isString(t)&&(r&&!this.responseType||o)){const a=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t,this.parseReviver)}catch(i){if(a)throw i.name==="SyntaxError"?L.from(i,L.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:D.classes.FormData,Blob:D.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};d.forEach(["delete","get","head","post","put","patch"],e=>{fe.headers[e]={}});const Gn=d.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Xn=e=>{const t={};let n,r,o;return e&&e.split(`
`).forEach(function(a){o=a.indexOf(":"),n=a.substring(0,o).trim().toLowerCase(),r=a.substring(o+1).trim(),!(!n||t[n]&&Gn[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},rt=Symbol("internals");function le(e){return e&&String(e).trim().toLowerCase()}function ve(e){return e===!1||e==null?e:d.isArray(e)?e.map(ve):String(e)}function Qn(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Zn=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Te(e,t,n,r,o){if(d.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!d.isString(t)){if(d.isString(r))return t.indexOf(r)!==-1;if(d.isRegExp(r))return r.test(t)}}function er(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function tr(e,t){const n=d.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,s,a){return this[r].call(this,t,o,s,a)},configurable:!0})})}let F=class{constructor(t){t&&this.set(t)}set(t,n,r){const o=this;function s(i,f,u){const l=le(f);if(!l)throw new Error("header name must be a non-empty string");const m=d.findKey(o,l);(!m||o[m]===void 0||u===!0||u===void 0&&o[m]!==!1)&&(o[m||f]=ve(i))}const a=(i,f)=>d.forEach(i,(u,l)=>s(u,l,f));if(d.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(d.isString(t)&&(t=t.trim())&&!Zn(t))a(Xn(t),n);else if(d.isObject(t)&&d.isIterable(t)){let i={},f,u;for(const l of t){if(!d.isArray(l))throw TypeError("Object iterator must return a key-value pair");i[u=l[0]]=(f=i[u])?d.isArray(f)?[...f,l[1]]:[f,l[1]]:l[1]}a(i,n)}else t!=null&&s(n,t,r);return this}get(t,n){if(t=le(t),t){const r=d.findKey(this,t);if(r){const o=this[r];if(!n)return o;if(n===!0)return Qn(o);if(d.isFunction(n))return n.call(this,o,r);if(d.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=le(t),t){const r=d.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Te(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let o=!1;function s(a){if(a=le(a),a){const i=d.findKey(r,a);i&&(!n||Te(r,r[i],i,n))&&(delete r[i],o=!0)}}return d.isArray(t)?t.forEach(s):s(t),o}clear(t){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const s=n[r];(!t||Te(this,this[s],s,t,!0))&&(delete this[s],o=!0)}return o}normalize(t){const n=this,r={};return d.forEach(this,(o,s)=>{const a=d.findKey(r,s);if(a){n[a]=ve(o),delete n[s];return}const i=t?er(s):String(s).trim();i!==s&&delete n[s],n[i]=ve(o),r[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return d.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&d.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[rt]=this[rt]={accessors:{}}).accessors,o=this.prototype;function s(a){const i=le(a);r[i]||(tr(o,a),r[i]=!0)}return d.isArray(t)?t.forEach(s):s(t),this}};F.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);d.reduceDescriptors(F.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});d.freezeMethods(F);function Ie(e,t){const n=this||fe,r=t||n,o=F.from(r.headers);let s=r.data;return d.forEach(e,function(i){s=i.call(n,s,o.normalize(),t?t.status:void 0)}),o.normalize(),s}function kt(e){return!!(e&&e.__CANCEL__)}let me=class extends L{constructor(t,n,r){super(t??"canceled",L.ERR_CANCELED,n,r),this.name="CanceledError",this.__CANCEL__=!0}};function Tt(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new L("Request failed with status code "+n.status,[L.ERR_BAD_REQUEST,L.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function nr(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function rr(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o=0,s=0,a;return t=t!==void 0?t:1e3,function(f){const u=Date.now(),l=r[s];a||(a=u),n[o]=f,r[o]=u;let m=s,b=0;for(;m!==o;)b+=n[m++],m=m%e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),u-a<t)return;const C=l&&u-l;return C?Math.round(b*1e3/C):void 0}}function or(e,t){let n=0,r=1e3/t,o,s;const a=(u,l=Date.now())=>{n=l,o=null,s&&(clearTimeout(s),s=null),e(...u)};return[(...u)=>{const l=Date.now(),m=l-n;m>=r?a(u,l):(o=u,s||(s=setTimeout(()=>{s=null,a(o)},r-m)))},()=>o&&a(o)]}const we=(e,t,n=3)=>{let r=0;const o=rr(50,250);return or(s=>{const a=s.loaded,i=s.lengthComputable?s.total:void 0,f=a-r,u=o(f),l=a<=i;r=a;const m={loaded:a,total:i,progress:i?a/i:void 0,bytes:f,rate:u||void 0,estimated:u&&i&&l?(i-a)/u:void 0,event:s,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(m)},n)},ot=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},st=e=>(...t)=>d.asap(()=>e(...t)),sr=D.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,D.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(D.origin),D.navigator&&/(msie|trident)/i.test(D.navigator.userAgent)):()=>!0,ar=D.hasStandardBrowserEnv?{write(e,t,n,r,o,s,a){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(t)}`];d.isNumber(n)&&i.push(`expires=${new Date(n).toUTCString()}`),d.isString(r)&&i.push(`path=${r}`),d.isString(o)&&i.push(`domain=${o}`),s===!0&&i.push("secure"),d.isString(a)&&i.push(`SameSite=${a}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function ir(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function lr(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function It(e,t,n){let r=!ir(t);return e&&(r||n==!1)?lr(e,t):t}const at=e=>e instanceof F?{...e}:e;function Q(e,t){t=t||{};const n={};function r(u,l,m,b){return d.isPlainObject(u)&&d.isPlainObject(l)?d.merge.call({caseless:b},u,l):d.isPlainObject(l)?d.merge({},l):d.isArray(l)?l.slice():l}function o(u,l,m,b){if(d.isUndefined(l)){if(!d.isUndefined(u))return r(void 0,u,m,b)}else return r(u,l,m,b)}function s(u,l){if(!d.isUndefined(l))return r(void 0,l)}function a(u,l){if(d.isUndefined(l)){if(!d.isUndefined(u))return r(void 0,u)}else return r(void 0,l)}function i(u,l,m){if(m in t)return r(u,l);if(m in e)return r(void 0,u)}const f={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:i,headers:(u,l,m)=>o(at(u),at(l),m,!0)};return d.forEach(Object.keys({...e,...t}),function(l){if(l==="__proto__"||l==="constructor"||l==="prototype")return;const m=d.hasOwnProp(f,l)?f[l]:o,b=m(e[l],t[l],l);d.isUndefined(b)&&m!==i||(n[l]=b)}),n}const Pt=e=>{const t=Q({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:i}=t;if(t.headers=a=F.from(a),t.url=At(It(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&a.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),d.isFormData(n)){if(D.hasStandardBrowserEnv||D.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(d.isFunction(n.getHeaders)){const f=n.getHeaders(),u=["content-type","content-length"];Object.entries(f).forEach(([l,m])=>{u.includes(l.toLowerCase())&&a.set(l,m)})}}if(D.hasStandardBrowserEnv&&(r&&d.isFunction(r)&&(r=r(t)),r||r!==!1&&sr(t.url))){const f=o&&s&&ar.read(s);f&&a.set(o,f)}return t},dr=typeof XMLHttpRequest<"u",cr=dr&&function(e){return new Promise(function(n,r){const o=Pt(e);let s=o.data;const a=F.from(o.headers).normalize();let{responseType:i,onUploadProgress:f,onDownloadProgress:u}=o,l,m,b,C,c;function y(){C&&C(),c&&c(),o.cancelToken&&o.cancelToken.unsubscribe(l),o.signal&&o.signal.removeEventListener("abort",l)}let h=new XMLHttpRequest;h.open(o.method.toUpperCase(),o.url,!0),h.timeout=o.timeout;function E(){if(!h)return;const v=F.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),g={data:!i||i==="text"||i==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:v,config:e,request:h};Tt(function(w){n(w),y()},function(w){r(w),y()},g),h=null}"onloadend"in h?h.onloadend=E:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(E)},h.onabort=function(){h&&(r(new L("Request aborted",L.ECONNABORTED,e,h)),h=null)},h.onerror=function(p){const g=p&&p.message?p.message:"Network Error",S=new L(g,L.ERR_NETWORK,e,h);S.event=p||null,r(S),h=null},h.ontimeout=function(){let p=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const g=o.transitional||Ke;o.timeoutErrorMessage&&(p=o.timeoutErrorMessage),r(new L(p,g.clarifyTimeoutError?L.ETIMEDOUT:L.ECONNABORTED,e,h)),h=null},s===void 0&&a.setContentType(null),"setRequestHeader"in h&&d.forEach(a.toJSON(),function(p,g){h.setRequestHeader(g,p)}),d.isUndefined(o.withCredentials)||(h.withCredentials=!!o.withCredentials),i&&i!=="json"&&(h.responseType=o.responseType),u&&([b,c]=we(u,!0),h.addEventListener("progress",b)),f&&h.upload&&([m,C]=we(f),h.upload.addEventListener("progress",m),h.upload.addEventListener("loadend",C)),(o.cancelToken||o.signal)&&(l=v=>{h&&(r(!v||v.type?new me(null,e,h):v),h.abort(),h=null)},o.cancelToken&&o.cancelToken.subscribe(l),o.signal&&(o.signal.aborted?l():o.signal.addEventListener("abort",l)));const x=nr(o.url);if(x&&D.protocols.indexOf(x)===-1){r(new L("Unsupported protocol "+x+":",L.ERR_BAD_REQUEST,e));return}h.send(s||null)})},ur=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,o;const s=function(u){if(!o){o=!0,i();const l=u instanceof Error?u:this.reason;r.abort(l instanceof L?l:new me(l instanceof Error?l.message:l))}};let a=t&&setTimeout(()=>{a=null,s(new L(`timeout of ${t}ms exceeded`,L.ETIMEDOUT))},t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),e=null)};e.forEach(u=>u.addEventListener("abort",s));const{signal:f}=r;return f.unsubscribe=()=>d.asap(i),f}},fr=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,o;for(;r<n;)o=r+t,yield e.slice(r,o),r=o},mr=async function*(e,t){for await(const n of pr(e))yield*fr(n,t)},pr=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},it=(e,t,n,r)=>{const o=mr(e,t);let s=0,a,i=f=>{a||(a=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:u,value:l}=await o.next();if(u){i(),f.close();return}let m=l.byteLength;if(n){let b=s+=m;n(b)}f.enqueue(new Uint8Array(l))}catch(u){throw i(u),u}},cancel(f){return i(f),o.return()}},{highWaterMark:2})},lt=64*1024,{isFunction:be}=d,hr=(({Request:e,Response:t})=>({Request:e,Response:t}))(d.global),{ReadableStream:dt,TextEncoder:ct}=d.global,ut=(e,...t)=>{try{return!!e(...t)}catch{return!1}},yr=e=>{e=d.merge.call({skipUndefined:!0},hr,e);const{fetch:t,Request:n,Response:r}=e,o=t?be(t):typeof fetch=="function",s=be(n),a=be(r);if(!o)return!1;const i=o&&be(dt),f=o&&(typeof ct=="function"?(c=>y=>c.encode(y))(new ct):async c=>new Uint8Array(await new n(c).arrayBuffer())),u=s&&i&&ut(()=>{let c=!1;const y=new n(D.origin,{body:new dt,method:"POST",get duplex(){return c=!0,"half"}}).headers.has("Content-Type");return c&&!y}),l=a&&i&&ut(()=>d.isReadableStream(new r("").body)),m={stream:l&&(c=>c.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(c=>{!m[c]&&(m[c]=(y,h)=>{let E=y&&y[c];if(E)return E.call(y);throw new L(`Response type '${c}' is not supported`,L.ERR_NOT_SUPPORT,h)})});const b=async c=>{if(c==null)return 0;if(d.isBlob(c))return c.size;if(d.isSpecCompliantForm(c))return(await new n(D.origin,{method:"POST",body:c}).arrayBuffer()).byteLength;if(d.isArrayBufferView(c)||d.isArrayBuffer(c))return c.byteLength;if(d.isURLSearchParams(c)&&(c=c+""),d.isString(c))return(await f(c)).byteLength},C=async(c,y)=>{const h=d.toFiniteNumber(c.getContentLength());return h??b(y)};return async c=>{let{url:y,method:h,data:E,signal:x,cancelToken:v,timeout:p,onDownloadProgress:g,onUploadProgress:S,responseType:w,headers:B,withCredentials:k="same-origin",fetchOptions:$}=Pt(c),O=t||fetch;w=w?(w+"").toLowerCase():"text";let A=ur([x,v&&v.toAbortSignal()],p),I=null;const q=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let J;try{if(S&&u&&h!=="get"&&h!=="head"&&(J=await C(B,E))!==0){let T=new n(y,{method:"POST",body:E,duplex:"half"}),M;if(d.isFormData(E)&&(M=T.headers.get("content-type"))&&B.setContentType(M),T.body){const[Y,W]=ot(J,we(st(S)));E=it(T.body,lt,Y,W)}}d.isString(k)||(k=k?"include":"omit");const P=s&&"credentials"in n.prototype,ae={...$,signal:A,method:h.toUpperCase(),headers:B.normalize().toJSON(),body:E,duplex:"half",credentials:P?k:void 0};I=s&&new n(y,ae);let H=await(s?O(I,$):O(y,ae));const Z=l&&(w==="stream"||w==="response");if(l&&(g||Z&&q)){const T={};["status","statusText","headers"].forEach(K=>{T[K]=H[K]});const M=d.toFiniteNumber(H.headers.get("content-length")),[Y,W]=g&&ot(M,we(st(g),!0))||[];H=new r(it(H.body,lt,Y,()=>{W&&W(),q&&q()}),T)}w=w||"text";let pe=await m[d.findKey(m,w)||"text"](H,c);return!Z&&q&&q(),await new Promise((T,M)=>{Tt(T,M,{data:pe,headers:F.from(H.headers),status:H.status,statusText:H.statusText,config:c,request:I})})}catch(P){throw q&&q(),P&&P.name==="TypeError"&&/Load failed|fetch/i.test(P.message)?Object.assign(new L("Network Error",L.ERR_NETWORK,c,I,P&&P.response),{cause:P.cause||P}):L.from(P,P&&P.code,c,I,P&&P.response)}}},br=new Map,Dt=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:o}=t,s=[r,o,n];let a=s.length,i=a,f,u,l=br;for(;i--;)f=s[i],u=l.get(f),u===void 0&&l.set(f,u=i?new Map:yr(t)),l=u;return u};Dt();const Xe={http:Pn,xhr:cr,fetch:{get:Dt}};d.forEach(Xe,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ft=e=>`- ${e}`,gr=e=>d.isFunction(e)||e===null||e===!1;function vr(e,t){e=d.isArray(e)?e:[e];const{length:n}=e;let r,o;const s={};for(let a=0;a<n;a++){r=e[a];let i;if(o=r,!gr(r)&&(o=Xe[(i=String(r)).toLowerCase()],o===void 0))throw new L(`Unknown adapter '${i}'`);if(o&&(d.isFunction(o)||(o=o.get(t))))break;s[i||"#"+a]=o}if(!o){const a=Object.entries(s).map(([f,u])=>`adapter ${f} `+(u===!1?"is not supported by the environment":"is not available in the build"));let i=n?a.length>1?`since :
`+a.map(ft).join(`
`):" "+ft(a[0]):"as no adapter specified";throw new L("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return o}const $t={getAdapter:vr,adapters:Xe};function Pe(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new me(null,e)}function mt(e){return Pe(e),e.headers=F.from(e.headers),e.data=Ie.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),$t.getAdapter(e.adapter||fe.adapter,e)(e).then(function(r){return Pe(e),r.data=Ie.call(e,e.transformResponse,r),r.headers=F.from(r.headers),r},function(r){return kt(r)||(Pe(e),r&&r.response&&(r.response.data=Ie.call(e,e.transformResponse,r.response),r.response.headers=F.from(r.response.headers))),Promise.reject(r)})}const qt="1.13.5",Ae={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ae[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const pt={};Ae.transitional=function(t,n,r){function o(s,a){return"[Axios v"+qt+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,i)=>{if(t===!1)throw new L(o(a," has been removed"+(n?" in "+n:"")),L.ERR_DEPRECATED);return n&&!pt[a]&&(pt[a]=!0,console.warn(o(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,a,i):!0}};Ae.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function xr(e,t,n){if(typeof e!="object")throw new L("options must be an object",L.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const s=r[o],a=t[s];if(a){const i=e[s],f=i===void 0||a(i,s,e);if(f!==!0)throw new L("option "+s+" must be "+f,L.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new L("Unknown option "+s,L.ERR_BAD_OPTION)}}const xe={assertOptions:xr,validators:Ae},j=xe.validators;let X=class{constructor(t){this.defaults=t||{},this.interceptors={request:new nt,response:new nt}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Q(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:s}=n;r!==void 0&&xe.assertOptions(r,{silentJSONParsing:j.transitional(j.boolean),forcedJSONParsing:j.transitional(j.boolean),clarifyTimeoutError:j.transitional(j.boolean),legacyInterceptorReqResOrdering:j.transitional(j.boolean)},!1),o!=null&&(d.isFunction(o)?n.paramsSerializer={serialize:o}:xe.assertOptions(o,{encode:j.function,serialize:j.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),xe.assertOptions(n,{baseUrl:j.spelling("baseURL"),withXsrfToken:j.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&d.merge(s.common,s[n.method]);s&&d.forEach(["delete","get","head","post","put","patch","common"],c=>{delete s[c]}),n.headers=F.concat(a,s);const i=[];let f=!0;this.interceptors.request.forEach(function(y){if(typeof y.runWhen=="function"&&y.runWhen(n)===!1)return;f=f&&y.synchronous;const h=n.transitional||Ke;h&&h.legacyInterceptorReqResOrdering?i.unshift(y.fulfilled,y.rejected):i.push(y.fulfilled,y.rejected)});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let l,m=0,b;if(!f){const c=[mt.bind(this),void 0];for(c.unshift(...i),c.push(...u),b=c.length,l=Promise.resolve(n);m<b;)l=l.then(c[m++],c[m++]);return l}b=i.length;let C=n;for(;m<b;){const c=i[m++],y=i[m++];try{C=c(C)}catch(h){y.call(this,h);break}}try{l=mt.call(this,C)}catch(c){return Promise.reject(c)}for(m=0,b=u.length;m<b;)l=l.then(u[m++],u[m++]);return l}getUri(t){t=Q(this.defaults,t);const n=It(t.baseURL,t.url,t.allowAbsoluteUrls);return At(n,t.params,t.paramsSerializer)}};d.forEach(["delete","get","head","options"],function(t){X.prototype[t]=function(n,r){return this.request(Q(r||{},{method:t,url:n,data:(r||{}).data}))}});d.forEach(["post","put","patch"],function(t){function n(r){return function(s,a,i){return this.request(Q(i||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}X.prototype[t]=n(),X.prototype[t+"Form"]=n(!0)});let wr=class Ut{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(o=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](o);r._listeners=null}),this.promise.then=o=>{let s;const a=new Promise(i=>{r.subscribe(i),s=i}).then(o);return a.cancel=function(){r.unsubscribe(s)},a},t(function(s,a,i){r.reason||(r.reason=new me(s,a,i),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Ut(function(o){t=o}),cancel:t}}};function Er(e){return function(n){return e.apply(null,n)}}function Sr(e){return d.isObject(e)&&e.isAxiosError===!0}const Me={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Me).forEach(([e,t])=>{Me[t]=e});function _t(e){const t=new X(e),n=gt(X.prototype.request,t);return d.extend(n,X.prototype,t,{allOwnKeys:!0}),d.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return _t(Q(e,o))},n}const N=_t(fe);N.Axios=X;N.CanceledError=me;N.CancelToken=wr;N.isCancel=kt;N.VERSION=qt;N.toFormData=Oe;N.AxiosError=L;N.Cancel=N.CanceledError;N.all=function(t){return Promise.all(t)};N.spread=Er;N.isAxiosError=Sr;N.mergeConfig=Q;N.AxiosHeaders=F;N.formToJSON=e=>Nt(d.isHTMLForm(e)?new FormData(e):e);N.getAdapter=$t.getAdapter;N.HttpStatusCode=Me;N.default=N;const{Axios:Wr,AxiosError:Yr,CanceledError:Kr,isCancel:Gr,CancelToken:Xr,VERSION:Qr,all:Zr,Cancel:eo,isAxiosError:to,spread:no,toFormData:ro,AxiosHeaders:oo,HttpStatusCode:so,formToJSON:ao,getAdapter:io,mergeConfig:lo}=N;window.axios=N;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function Ft(e){if(!e||e.dataset.birthdayDropdownAttached)return;const t=e.getAttribute("data-name")||"birthday",n=e.hasAttribute("required"),r=e.dataset.birthdayValue||"";let o="",s="",a="";r&&/^\d{4}-\d{2}-\d{2}$/.test(r)&&(a=r.slice(0,4),o=r.slice(5,7),s=r.slice(8,10));const i=document.createElement("input");i.type="hidden",i.name=t,i.value=r,e.appendChild(i);const f=document.createElement("div");f.className="birthday-dropdown-wrapper flex gap-2";const u=document.createElement("select");u.className="birthday-month-select flex-1 bg-teal-100 border-2 border-teal-500 rounded-lg px-2 py-2 text-sm font-semibold focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-200 cursor-pointer",u.setAttribute("aria-label","Month");const l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let m='<option value="">Month</option>';l.forEach((v,p)=>{const g=String(p+1).padStart(2,"0");m+=`<option value="${g}"${g===o?" selected":""}>${v}</option>`}),u.innerHTML=m;const b=document.createElement("select");b.className="birthday-day-select flex-1 bg-teal-100 border-2 border-teal-500 rounded-lg px-2 py-2 text-sm font-semibold focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-200 cursor-pointer",b.setAttribute("aria-label","Day");let C='<option value="">Day</option>';for(let v=1;v<=31;v++){const p=String(v).padStart(2,"0");C+=`<option value="${p}"${p===s?" selected":""}>${v}</option>`}b.innerHTML=C;const c=document.createElement("select");c.className="birthday-year-select flex-1 bg-teal-100 border-2 border-teal-500 rounded-lg px-2 py-2 text-sm font-semibold focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-200 cursor-pointer",c.setAttribute("aria-label","Year");const y=new Date().getFullYear(),h=y-100;let E='<option value="">Year</option>';for(let v=y;v>=h;v--){const p=String(v)===a?" selected":"";E+=`<option value="${v}"${p}>${v}</option>`}c.innerHTML=E,f.appendChild(u),f.appendChild(b),f.appendChild(c),e.appendChild(f);const x=()=>{const v=u.value,p=b.value,g=c.value;if(v&&p&&g){const S=`${g}-${v}-${p}`;i.value=S,e.dataset.birthdayValue=S;const w=new Date(parseInt(g),parseInt(v),0).getDate();parseInt(p)>w?(b.setCustomValidity("Invalid day for selected month"),e.classList.add("birthday-invalid"),e.classList.remove("birthday-valid"),e.removeAttribute("data-birthday-valid")):(b.setCustomValidity(""),e.classList.remove("birthday-invalid"),e.classList.add("birthday-valid"),e.setAttribute("data-birthday-valid","true"))}else i.value="",e.dataset.birthdayValue="",n&&(v||p||g)?(e.classList.add("birthday-invalid"),e.classList.remove("birthday-valid"),e.removeAttribute("data-birthday-valid")):(e.classList.remove("birthday-invalid"),e.classList.remove("birthday-valid"),e.removeAttribute("data-birthday-valid"))};u.addEventListener("change",x),b.addEventListener("change",x),c.addEventListener("change",x),o&&s&&a&&x(),e.dataset.birthdayDropdownAttached="1"}function Lr(e=document){e.querySelectorAll("[data-birthday-dropdown]").forEach(Ft)}function Cr(e=document){e.querySelectorAll("[data-birthday-dropdown]").forEach(n=>{const r=n.querySelector(".birthday-month-select"),o=n.querySelector(".birthday-day-select"),s=n.querySelector(".birthday-year-select");r&&r.dispatchEvent(new Event("change",{bubbles:!0})),o&&o.dispatchEvent(new Event("change",{bubbles:!0})),s&&s.dispatchEvent(new Event("change",{bubbles:!0}))})}function ht(e=document){const t=e.querySelectorAll(".birthday-dropdown-wrapper");let n=!1;return t.forEach(r=>{const o=De(r.querySelector(".birthday-month-select")),s=De(r.querySelector(".birthday-day-select")),a=De(r.querySelector(".birthday-year-select"));o&&s&&a&&(n=!0)}),n}function De(e){let t=!0;return e.value?(e.classList.remove("border-red-600"),e.classList.add("border-teal-500")):(e.classList.remove("border-teal-500"),e.classList.add("border-red-600"),t=!1),t}typeof document<"u"&&document.addEventListener("DOMContentLoaded",()=>{Lr()});function yt(e,t=""){let n="",r="",o="";t&&/^\d{4}-\d{2}-\d{2}$/.test(t)&&(o=t.slice(0,4),n=t.slice(5,7),r=t.slice(8,10));const s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let a='<option value="">Month</option>';s.forEach((l,m)=>{const b=String(m+1).padStart(2,"0");a+=`<option value="${b}"${b===n?" selected":""}>${l}</option>`});let i='<option value="">Day</option>';for(let l=1;l<=31;l++){const m=String(l).padStart(2,"0");i+=`<option value="${m}"${m===r?" selected":""}>${l}</option>`}const f=new Date().getFullYear();let u='<option value="">Year</option>';for(let l=f;l>=f-100;l--){const m=String(l)===o?" selected":"";u+=`<option value="${l}"${m}>${l}</option>`}return`
        <div class="birthday-dropdown-wrapper flex gap-2">
            <select class="birthday-month-select flex-1 bg-white border-2 border-gray-200 rounded-lg px-2 py-2.5 text-sm focus:border-teal-500 focus:ring-2 focus:ring-teal-200" data-name="${e}[month]">
                ${a}
            </select>
            <select class="birthday-day-select flex-1 bg-white border-2 border-gray-200 rounded-lg px-2 py-2.5 text-sm focus:border-teal-500 focus:ring-2 focus:ring-teal-200" data-name="${e}[day]">
                ${i}
            </select>
            <select class="birthday-year-select flex-1 bg-white border-2 border-gray-200 rounded-lg px-2 py-2.5 text-sm focus:border-teal-500 focus:ring-2 focus:ring-teal-200" data-name="${e}[year]">
                ${u}
            </select>
        </div>
    `}function Mt(e){if(!e||e.dataset.cameraAttached)return;const t=e.getAttribute("data-name")||"childPhoto";e.id||""+Math.random().toString(36).slice(2);const n=document.createElement("input");n.type="hidden",n.name=t,n.value="",e.appendChild(n);const r=document.createElement("div");r.className="camera-capture-wrapper";const o=document.createElement("video");o.className="camera-video w-full h-48 bg-gray-900 rounded-lg object-cover",o.setAttribute("playsinline",""),o.setAttribute("autoplay",""),o.style.display="none";const s=document.createElement("canvas");s.className="camera-canvas hidden",s.width=320,s.height=240;const a=document.createElement("img");a.className="camera-preview w-full h-48 bg-gray-200 rounded-lg object-cover border-2 border-teal-500",a.alt="Child photo",a.style.display="none";const i=document.createElement("div");i.className="camera-placeholder w-full h-48 bg-gray-100 rounded-lg flex flex-col items-center justify-center border-2 border-dashed border-gray-300",i.innerHTML=`
        <i class="fa-solid fa-camera text-4xl text-gray-400 mb-2"></i>
        <p class="text-sm text-gray-500">No photo captured</p>
    `;const f=document.createElement("div");f.className="camera-buttons flex gap-2 mt-2 relative z-10";const u=document.createElement("button");u.type="button",u.className="start-camera-btn flex-1 bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors relative z-10",u.innerHTML='<i class="fa-solid fa-camera mr-2"></i> Take Photo';const l=document.createElement("button");l.type="button",l.className="upload-btn flex-1 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors relative z-10",l.innerHTML='<i class="fa-solid fa-upload mr-2"></i> Upload';const m=document.createElement("button");m.type="button",m.className="retake-btn flex-1 bg-amber-500 hover:bg-amber-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors hidden relative z-10",m.innerHTML='<i class="fa-solid fa-rotate-right mr-2"></i> Retake';const b=document.createElement("button");b.type="button",b.className="remove-btn flex-1 bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors hidden relative z-10",b.innerHTML='<i class="fa-solid fa-trash mr-2"></i> Remove';const C=document.createElement("input");C.type="file",C.accept="image/*",C.className="hidden",f.appendChild(u),f.appendChild(l),f.appendChild(m),f.appendChild(b);const c=document.createElement("div");c.className="camera-modal fixed inset-0 z-50 flex items-center justify-center bg-black/70 hidden",c.innerHTML=`
        <div class="camera-modal-content bg-white rounded-2xl p-4 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-gray-800">Take Photo</h3>
                <button type="button" class="close-camera-btn text-gray-500 hover:text-gray-700">
                    <i class="fa-solid fa-times text-xl"></i>
                </button>
            </div>
            <video class="modal-video w-full h-56 bg-gray-900 rounded-lg object-cover" playsinline autoplay></video>
            <canvas class="modal-canvas hidden"></canvas>
            <div class="flex gap-2 mt-4">
                <button type="button" class="capture-btn flex-1 bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-4 rounded-lg transition-colors">
                    <i class="fa-solid fa-circle text-xl mr-2"></i> Capture
                </button>
                <button type="button" class="cancel-camera-btn flex-1 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-4 rounded-lg transition-colors">
                    Cancel
                </button>
            </div>
        </div>
    `,r.appendChild(o),r.appendChild(s),r.appendChild(a),r.appendChild(i),r.appendChild(f),r.appendChild(C),e.appendChild(r),document.body.appendChild(c);const y=c.querySelector(".modal-video"),h=c.querySelector(".modal-canvas"),E=c.querySelector(".capture-btn"),x=c.querySelector(".close-camera-btn"),v=c.querySelector(".cancel-camera-btn");let p=null;const g=async()=>{try{p&&(p.getTracks().forEach(O=>O.stop()),p=null),p=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}},audio:!1}),y.srcObject=p,y.style.display="block",c.classList.remove("hidden")}catch(O){R("error","Error accessing camera:",O);let A="Unable to access camera.";O.name==="NotReadableError"?A="Camera is already in use by another application. Please close other apps using the camera.":O.name==="NotAllowedError"?A="Camera permission denied. Please allow camera access in your browser settings.":O.name==="NotFoundError"&&(A="No camera found. Please connect a camera to your device."),alert(A)}},S=()=>{p&&(p.getTracks().forEach(O=>O.stop()),p=null),c.classList.add("hidden")},w=()=>{h.width=y.videoWidth||320,h.height=y.videoHeight||240,h.getContext("2d").drawImage(y,0,0,h.width,h.height);const A=h.toDataURL("image/jpeg",.8);n.value=A,a.src=A,a.style.display="block",i.style.display="none",a.classList.add("rounded-full","object-cover","border-4","border-teal-500","mx-auto"),a.style.width="100px",a.style.height="100px",u.classList.add("hidden"),l.classList.add("hidden"),m.classList.remove("hidden"),m.classList.add("flex-1"),b.classList.remove("hidden"),b.classList.add("flex-1"),S()},B=()=>{g()},k=()=>{n.value="",a.src="",a.style.display="none",a.classList.remove("rounded-full","object-cover","border-4","border-teal-500","mx-auto"),a.style.width="",a.style.height="",i.style.display="flex",u.classList.remove("hidden"),l.classList.remove("hidden"),m.classList.add("hidden"),b.classList.add("hidden")};u.addEventListener("click",g),l.addEventListener("click",()=>C.click()),m.addEventListener("click",B),b.addEventListener("click",k),E.addEventListener("click",w),x.addEventListener("click",S),v.addEventListener("click",S),C.addEventListener("change",O=>{const A=O.target.files[0];if(A){const I=new FileReader;I.onload=q=>{const J=q.target.result;n.value=J,a.src=J,a.style.display="block",i.style.display="none",a.classList.add("rounded-full","object-cover","border-4","border-teal-500","mx-auto"),a.style.width="100px",a.style.height="100px",u.classList.add("hidden"),l.classList.add("hidden"),m.classList.remove("hidden"),m.classList.add("flex-1"),b.classList.remove("hidden"),b.classList.add("flex-1")},I.readAsDataURL(A)}}),c.addEventListener("click",O=>{O.target===c&&S()});const $=O=>{O.key==="Escape"&&!c.classList.contains("hidden")&&(S(),document.removeEventListener("keydown",$))};document.addEventListener("keydown",$),e.dataset.cameraAttached="1"}function Rr(e=document){e.querySelectorAll("[data-camera-input]").forEach(Mt)}typeof document<"u"&&document.addEventListener("DOMContentLoaded",()=>{Rr()});function te(e,t){if(t==null||t=="")return"";const n=new Date(t);switch(e){case"longDate":return n.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});case"shortDate":return n.toLocaleDateString("en-Us",{month:"short",day:"numeric",year:"numeric"});case"slashDate":{const r=String(n.getMonth()+1).padStart(2,"0"),o=String(n.getDate()).padStart(2,"0"),s=n.getFullYear();return`${r} / ${o} / ${s}`}case"iso":return n.toISOString().split("T")[0];case"timeOnly24":return n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});case"timeOnly12":return n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});default:return n.toLocaleDateString()}}let U={isOldUser:!1,phoneNumber:0,oldUserLoaded:!1,returneeData:null},He={selectCount:0};function Br(e,t){const r=e.photo&&e.photo.length>0?`<img src="/${e.photo}" alt="${e.firstname}'s photo" class="w-24 h-24 rounded-full object-cover border-2 border-teal-500 mx-auto mb-2">`:`<div class="w-24 h-24 rounded-full bg-gray-200 border-2 border-gray-300 mx-auto mb-2 flex items-center justify-center">
            <i class="fa-solid fa-user text-3xl text-gray-400"></i>
          </div>`;return`
        <div class="attached-fields child-entry flex flex-col">
            <input type="name" name="child[${t}][name]" value="${e.firstname}" hidden required/>
            <input type="hidden" name="child[${t}][birthday]" value="${te("iso",e.birthday)}"/>
            <input type="hidden" name="child[${t}][photo]" value="${e.photo}"/>
            
            <!-- Photo Display for Returning Users -->
            <div class="text-center mb-3">
                ${r}
                <p class="text-sm font-semibold text-gray-700">${e.firstname}</p>
            </div>
            
            <div class="h-full">
                <label class="block text-base font-semibold text-gray-900 mb-2">Playtime Duration <span class="text-red-600">*</span></label>
                <div class="relative">
                    <select name="child[${t}][playDuration]" class="child-duration bg-teal-100 w-full px-4 py-2 border-2 border-teal-500 shadow rounded-lg font-semibold focus:outline-none focus:border-cyan-400 focus:shadow-none transition-all duration-300 cursor-pointer appearance-none" required>
                        <option value="1">1 Hour = 100</option>  
                        <option value="2">2 Hours = 200</option> 
                        <option value="3">3 Hours = 300</option>
                        <option value="4">4 Hours = 400</option>
                        <option value="unlimited">Unlimited = 500</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-teal-500">
                        <i class="fa-solid fa-chevron-down text-sm"></i>
                    </div>
                </div>
            </div>
            <div class="h-full">
                <label class="block text-base font-semibold text-gray-900 mb-2">Add Socks</label>
                <div class="relative">
                    <select name="child[${t}][addSocks]" data-child-index="${t}" class="edit-child-socks bg-teal-100 w-full px-4 py-2 border-2 border-teal-500 shadow rounded-lg font-semibold focus:outline-none focus:border-cyan-400 focus:shadow-none transition-all duration-300 cursor-pointer appearance-none" required>
                        <option value="0">No</option>  
                        <option value="1">Yes</option> 
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-teal-500">
                        <i class="fa-solid fa-chevron-down text-sm"></i>
                    </div>
                </div>
            </div>
        </div>
    `}function Qe(e=!1){let t=!0;const n=document.getElementById("add-child-prompt");return He.selectCount===0&&!e?(n.hidden=!1,n.textContent="You need to add at least one child to continue.",t=!1):(n.textContent="",n.hidden=!0),t}class Ne{constructor(t,n,r){this.button=document.getElementById(`${t}`),this.icon=document.getElementById(`${n}`),this.info=document.getElementById(`${r}`),this.state=!1,this.button.addEventListener("click",()=>this.toggle())}toggle(){return this.state=!this.state,this.icon.classList.toggle("fa-solid",this.state),this.icon.classList.toggle("fa-square-check",this.state),this.icon.classList.toggle("text-green-500",this.state),this.icon.classList.toggle("fa-regular",!this.state),this.icon.classList.toggle("fa-square",!this.state),this.icon.classList.toggle("text-red-500",!this.state),this.button.dispatchEvent(new CustomEvent("change",{detail:{checked:this.state}})),this.state}setLabel(t){this.info.innerHTML=t}isChecked(){return this.state}onChange(t){this.button.addEventListener("change",n=>t(n.detail.checked))}}function $e(e=!0){const t=document.getElementById("parentBirthday"),n=document.getElementById("parentBirthday-hidden");e?(t.disabled=!0,n.disabled=!1):(t.disabled=!1,n.disabled=!0)}function Or(e=!0){const t=document.getElementById("edit-parent-checkbox-el");e?t.classList.remove("hidden"):t.classList.add("hidden")}function Ee(e,t){e.forEach(n=>{!t&&n.hasAttribute("required")?n.removeAttribute("readonly"):n.setAttribute("readonly",!0)})}function Ht(e,t){e.querySelectorAll(".birthday-dropdown-wrapper").forEach(r=>{t?(r.querySelector(".birthday-month-select").disabled=!0,r.querySelector(".birthday-day-select").disabled=!0,r.querySelector(".birthday-year-select").disabled=!0,r.classList.add("disabled:cursor-not-allowed")):(r.querySelector(".birthday-month-select").disabled=!1,r.querySelector(".birthday-day-select").disabled=!1,r.querySelector(".birthday-year-select").disabled=!1,r.classList.remove("disabled:cursor-not-allowed"))})}const Se=[document.getElementById("guardianName"),document.getElementById("guardianLastName"),document.getElementById("guardianPhone")],jt=[document.getElementById("parentName"),document.getElementById("parentLastName"),document.getElementById("parentEmail")],oe=new Ne("add-guardian-checkbox","check-add-guardian-icon","check-add-guardian-info");oe.setLabel(`
    Add Guardian <span class="text-red-600">*</span>
`);oe.onChange(e=>{document.getElementById("guardian-form").hidden=!e,Se.forEach(t=>{t&&(t.required=e)}),oe.isChecked()||Se.forEach(t=>{t&&(t.value="",t.required=!1)})});const zt=new Ne("edit-parent-checkbox","edit-parent-icon","edit-parent-info");zt.setLabel("Edit info");zt.onChange(e=>{Ee(jt,!e),Ht(document.getElementById("parentBirthday"),!e),R("log","Returnee Data: ",U.returneeData),U.returneeData.oldUserData.guardians.length>=1&&Ee(Se,!e)});const Le=new Ne("confirm-guardian-checkbox","confirm-guardian-icon","confirm-guardian-info");Le.setLabel(`
    This guardian is allowed to pick up this child
`);Le.onChange(()=>{Le.isChecked()?document.getElementById("guardianAuthorized").value="1":document.getElementById("guardianAuthorized").value="0"});const je=document.getElementById("exist-children");function Ar(e){R("log","Auto-filling fields with:",e),U.oldUserLoaded=e.userLoaded,document.getElementById("parentName").value=e.oldUserData.firstname,document.getElementById("parentLastName").value=e.oldUserData.lastname,document.getElementById("parentEmail").value=e.oldUserData.email,document.getElementById("parentBirthday-hidden").value=te("iso",e.oldUserData.birthday);const t=document.getElementById("parentBirthday"),n=te("iso",e.oldUserData.birthday);if(n&&/^\d{4}-\d{2}-\d{2}$/.test(n)){const r=n.slice(0,4),o=n.slice(5,7),s=n.slice(8,10);t.querySelector(".birthday-month-select").value=o,t.querySelector(".birthday-day-select").value=s,t.querySelector(".birthday-year-select").value=r}e.oldUserData.guardians.length>=1&&(e.oldUserData.guardians.forEach(r=>{document.getElementById("guardianName").value=r.firstname,document.getElementById("guardianLastName").value=r.lastname,document.getElementById("guardianPhone").value=r.mobileno,document.getElementById("add-guardian-checkbox").classList.add("hidden"),oe.toggle(),r.guardianauthorized&&Le.toggle()}),document.getElementById("guardian-form").hidden=!1,Ee(Se,!0)),Ee(jt,!0),Ht(document.getElementById("parentBirthday"),!0)}function Nr(e,t){R("log","Children data: ",e);const n=document.getElementById("new-customer-header"),r=document.getElementById("returnee-customer-header"),o=document.getElementById("existing-children-add-m");document.getElementById("parent-name").textContent=t,je.hidden=!1,n.hidden=!0,r.hidden=!1,o.hidden=!1,e.forEach((s,a)=>{const i=document.createElement("div");i.className="exist-child-el flex flex-col p-3 gap-6 border border-teal-600 rounded-lg",i.innerHTML=`
            <div>
                <button type="button" class="add-exist-child text-start text-teal-700 font-semibold py-0 px-4 w-25 rounded-full mb-2 hover:text-teal-500 transition-all duration-300">
                    <i class="check-i fa-solid fa-plus"></i> Add
                </button>
                <h3 class="bg-teal-100 w-full px-4 py-2 border-2 border-teal-500 shadow rounded-lg font-semibold focus:outline-none focus:border-cyan-400 focus:shadow-none transition-all duration-300">${s.firstname}</h3>
            </div>
        `,je.appendChild(i);let f=!1;const u=i.querySelector(".check-i"),l=i.querySelector(".add-exist-child");l.addEventListener("click",()=>{if(f=!f,f)u.classList.remove("fa-plus"),l.classList.remove("text-teal-700"),u.classList.add("fa-check","text-2xl","font-bold","text-green-500"),l.classList.add("text-green-500"),i.insertAdjacentHTML("beforeend",Br(s,a)),He.selectCount++,Qe();else{u.classList.remove("fa-check","text-2xl","font-bold","text-green-500"),l.classList.remove("text-green-500"),u.classList.add("fa-plus"),l.classList.add("text-teal-700");const m=i.querySelector(".attached-fields");m&&m.remove(),He.selectCount--}})}),R("log","Children auto-filled successfully"),removeFirstChild(e.length)}function kr(){const e=je.querySelectorAll(".edit-child-socks");let t=0;return e.forEach(n=>{n&&n.value==="1"&&t++}),t}let ze=0;window.document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("childrenContainer"),t=document.getElementById("addChildBtn");let n=e.querySelectorAll(".child-entry").length-1;function r(){n=n+1;const i=n,f=document.createElement("div");f.className="child-entry pt-3 border border-teal-600 rounded-lg mt-4",f.innerHTML=`
            <div class="px-3 mb-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                <div>
                    <label class="block text-base font-semibold text-gray-900 mb-2">Name <span class="text-red-600">*</span></label>
                    <input type="text" name="child[${n}][name]" class="bg-teal-100 w-full px-4 py-2 border-2 border-teal-500 shadow rounded-lg font-semibold focus:outline-none focus:border-cyan-400 focus:shadow-none transition-all duration-300" placeholder="Jane" required/>
                </div>

                <div>
                    <label class="block text-base font-semibold text-gray-900 mb-2">Birthday <span class="text-red-600">*</span></label>
                    <div id="child-${n}-birthday" data-birthday-dropdown data-name="child[${n}][birthday]" required class="bg-teal-100 rounded-lg"></div>
                </div>

                <div>
                    <label class="block text-base font-semibold text-gray-900 mb-2">Playtime Duration <span class="text-red-600">*</span></label>
                    <div class="relative">
                        <select name="child[${n}][playDuration]" class="child-duration bg-teal-100 w-full px-4 py-2 border-2 border-teal-500 shadow rounded-lg font-semibold focus:outline-none focus:border-cyan-400 focus:shadow-none transition-all duration-300 cursor-pointer appearance-none" required>
                            <option value="1">1 Hour = 100</option>  
                            <option value="2">2 Hours = 200</option>
                            <option value="3">3 Hours = 300</option>
                            <option value="4">4 Hours = 400</option>
                            <option value="unlimited">Unlimited = 500</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-teal-500">
                            <i class="fa-solid fa-chevron-down text-sm"></i>
                        </div>
                    </div>
                </div>
                <div>
                    <label class="block text-base font-semibold text-gray-900 mb-2">Add Socks</label>
                    <div class="relative">
                        <select name="child[${n}][addSocks]" class="child-duration bg-teal-100 w-full px-4 py-2 border-2 border-teal-500 shadow rounded-lg font-semibold focus:outline-none focus:border-cyan-400 focus:shadow-none transition-all duration-300 cursor-pointer appearance-none">
                            <option value="0">No</option>
                            <option value="1">Yes</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-teal-500">
                            <i class="fa-solid fa-chevron-down text-sm"></i>
                        </div>
                    </div>
                </div>

                <!-- Child Photo Camera Capture -->
                <div>
                    <label class="block text-base font-semibold text-gray-900 mb-2">Child Photo</label>
                    <div id="child-${n}-photo" data-camera-input data-name="child[${n}][photo]" class="bg-teal-50 rounded-lg p-2 overflow-visible"></div>
                </div>
            </div>
            
            <div class="flex justify-start pt-2">
                <button type="button" class="remove-child text-sm font-bold text-white bg-red-600 hover:bg-red-500 px-4 py-1.5 rounded-tr-xl rounded-bl-lg shadow transition-all duration-200 flex items-center gap-2">
                    <i class="fa-solid fa-trash text-xs"></i> Remove
                </button>
            </div>
        `,o(f);const u=f.querySelector("[data-birthday-dropdown]");u&&Ft(u);const l=f.querySelector("[data-camera-input]");return l&&Mt(l),{entry:f,index:i}}function o(i){const f=i.querySelector(".remove-child");f&&f.addEventListener("click",()=>{i.remove(),ze--}),ze++,Qe(!0)}function s(i){n=i,document.getElementById("first-child").remove()}window.removeFirstChild=s;function a(){const i=e.querySelectorAll('select[name$="[addSocks]"]');let f=0;return i.forEach(u=>{u&&u.value==="1"&&f++}),(f+kr())*100}window.countSelectedSocks=a,t.addEventListener("click",()=>{const i=r();e.appendChild(i.entry),i.entry.querySelector(".child-first")})});function Tr(e){const n=e.value.trim().replace(/[\s\-\$\$]/g,"");return n&&/^(?:\+63|0)?9\d{9}$/.test(n)}window.validatePhone=Tr;function Ir(e,t,n){const r=document.getElementById(e);if(!r){R("error",`Step ${e} not found`);return}const o=document.getElementById("welcome-message");o&&o.remove();const s=document.createElement("div");s.id="welcome-message",s.className="text-center text-lg font-semibold mb-4 p-3 rounded-lg",t?(s.textContent=`Welcome back, ${n}!`,s.classList.add("bg-green-100","text-green-700","border","border-green-300")):(s.textContent="Welcome! New customer detected.",s.classList.add("bg-blue-100","text-blue-700","border","border-blue-300")),r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s)}window.showWelcomeMessageOnStep=Ir;function Pr(e=!1){const t=document.getElementById("phone");e?(t.setAttribute("readonly",!0),t.ariaReadOnly=!0):(t.removeAttribute("readonly"),t.ariaReadOnly=!1)}window.phoneReadOnly=Pr;const qe=document.getElementById("otp-choices"),z=document.getElementById("otp-message");let Dr=!1,ee=0;window.correctCode=Dr;window.storePhone=ee;let Ve=0;function $r(e,t){if(R("log","generateOtpChoices called with:",`${e}, ${t}`),!qe){R("error","OTP container not found!");return}qe.innerHTML="",z.textContent="",z.className="text-center min-h-[24px] font-medium";const n=Vt(e);let r=[e,...n];r=qr(r),r.forEach(o=>{const s=document.createElement("button");s.type="button",s.className="w-30 otp-choice bg-gray-50 border-2 border-gray-300 rounded-lg shadow p-2 text-xl font-bold text-gray-800 cursor-pointer transition-all hover:border-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500",s.innerHTML=`
            <span>${o[0]}</span>
            <span>${o[1]}</span>
            <span>${o[2]}</span>
        `,s.dataset.otp=o,s.addEventListener("click",async()=>{document.querySelectorAll(".otp-choice").forEach(i=>{i.disabled=!0,i.classList.remove("border-green-500","border-red-500","bg-green-50","bg-red-50"),i.classList.add("border-gray-300","opacity-70")});const a=await Je(ne.verifyOtpURL,{otp:o},"PATCH",ee);a.isCorrectOtp?(s.classList.remove("border-gray-300","opacity-70"),s.classList.add("border-green-500","bg-green-50"),z.textContent=" Correct!",z.className="text-center text-green-600 font-medium",window.correctCode=!0,phoneReadOnly(!0),a.isOldUser&&(U.isOldUser=a.isOldUser,U.phoneNumber=a.phoneNum),U.oldUserLoaded||setTimeout(async()=>{if(a.isOldUser){let i=null;a.returneeData&&(a.returneeData.data||a.returneeData.parent)?i=a.returneeData:a.phoneNum&&(i=await bt("GET",ne.searchReturneeURL,U.phoneNumber),U.returneeData=i,R("log","Returnee data: ",i)),window.showSteps&&(i&&(Ar(i),Or()),window.showSteps(2,"next"),await new Promise(f=>setTimeout(f,300)),window.showSteps(3,"next"),await new Promise(f=>setTimeout(f,300)),i&&i.oldUserData.children.length>=1&&Nr(i.oldUserData.children,i.oldUserData.d_name))}else if(window.showSteps){const i=window.getCurrentStep?window.getCurrentStep():0;window.showSteps(i+1,"next")}},500)):(s.classList.remove("border-gray-300","opacity-70"),s.classList.add("border-red-500","bg-red-50"),z.textContent=" Incorrect code. Please try again.",z.className="text-center text-red-500 font-medium",setTimeout(()=>{document.querySelectorAll(".otp-choice").forEach(i=>{i.disabled=!1,i.classList.remove("opacity-70")})},500),_r(t))}),qe.appendChild(s)})}function Vt(e){const t=e.split(""),n=[],r=Math.floor(Math.random()*3),o=[...t];o[r]=String((parseInt(o[r])+1)%10),n.push(o.join(""));const s=[...t],a=Math.floor(Math.random()*2);[s[a],s[a+1]]=[s[a+1],s[a]];const i=s.join("");return i===e||i===n[0]?Vt(e):(n.push(i),n)}function qr(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}async function Ur(e){if(R("log","generateOtp called with:",e),R("log","Current storePhone:",ee),ee!==0&&ee===e){R("log","Same phone number, skipping OTP generation");return}ee=e,Ve=0,R("log","Calling makeOtp API with URL:",ne.makeOtpURL);try{const t={phone:e};R("log","Sending data:",t);const n=await Je(ne.makeOtpURL,t);R("log","OTP response:",n),R("log","OTP: ",n.code,!0),n&&n.code?$r(n.code,n.id,e):(R("error","No OTP code returned or error:",n),z.textContent="Error generating OTP. Please try again.",z.className="text-center text-red-600 font-medium")}catch(t){R("error","Error calling makeOtp API:",t),R("error","Error message:",t.message),z.textContent="Error generating OTP. Please try again.",z.className="text-center text-red-600 font-medium"}}window.generateOtp=Ur;function _r(e){Ve++,Ve==2&&(z.textContent="Multiple Attempts. Terminating form",z.className="text-center text-red-500 font-medium",document.querySelectorAll(".otp-choice").forEach(t=>{t.disabled=!0,t.classList.remove("border-green-500","border-red-500","bg-green-50","bg-red-50"),t.classList.add("border-gray-300","opacity-70")}),setTimeout(async()=>{await bt("DELETE",ne.deleteOtpURL,[e]),location.reload()},1e3))}function Fr(e){const t={};for(const r in e){const o=e[r]===""?null:e[r],s=r.match(/[^\[\]]+/g);let a=t;s.forEach((i,f)=>{f===s.length-1?a[i]=o:(a[i]||(a[i]=/^\d+$/.test(s[f+1])?[]:{}),a=a[i])})}function n(r){if(typeof r!="object"||r===null)return r;const o=Object.keys(r);if(o.every(s=>/^\d+$/.test(s)))return o.map(s=>n(r[s]));{const s={};for(const a in r)s[a]=n(r[a]);return s}}return n(t)}function Mr(e=null){const t=document.getElementById("modal-container"),n=document.getElementById("modal-title"),r=document.getElementById("items-subcat-container");if(!t){showConsole("error","Modal container not found");return}document.querySelectorAll(".close-modal").forEach(b=>{b.onclick=()=>t.classList.add("hidden")}),n.textContent="Review & Edit Your Information",r.innerHTML="";const s=document.createElement("div");s.className="space-y-4";const a=e?.parent||{},i=e?.guardian||null,f=document.createElement("div");f.className="bg-gradient-to-r from-teal-50 to-white rounded-xl p-4 mb-4 border border-teal-100";let u=`
        <div class="flex items-center gap-2 mb-4">
            <div class="bg-teal-100 p-2 rounded-lg">
                <svg class="w-5 h-5 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
            </div>
            <h4 class="font-bold text-teal-800 text-lg">Parent Information</h4>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="text-sm font-semibold text-gray-600 block mb-1">First Name</label>
                <input type="text" id="edit-parentName" class="w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 transition-all" value="${a.first_name||""}">
            </div>
            <div>
                <label class="text-sm font-semibold text-gray-600 block mb-1">Last Name</label>
                <input type="text" id="edit-parentLastName" class="w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 transition-all" value="${a.last_name||""}">
            </div>
            <div class="md:col-span-2">
                <label class="text-sm font-semibold text-gray-600 block mb-1">Email</label>
                <input type="email" id="edit-parentEmail" class="w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 transition-all" value="${a.email||""}">
            </div>
            <div>
                <label class="text-sm font-semibold text-gray-600 block mb-1">Phone</label>
                <input type="tel" id="edit-phone" class="w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 transition-all" value="${e?.phone||""}">
            </div>
            <div>
                <label class="text-sm font-semibold text-gray-600 block mb-1">Birthday</label>
                <div id="edit-parentBirthday">
                    ${yt("parentBirthday",a.birthday)}
                </div>
            </div>
        </div>
    `;if(i&&(i.first_name||i.last_name)&&(u+=`
            <div class="mt-4 pt-4 border-t border-teal-200">
                <div class="flex items-center gap-2 mb-4">
                    <div class="bg-purple-100 p-2 rounded-lg">
                        <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                        </svg>
                    </div>
                    <h4 class="font-bold text-purple-800 text-lg">Guardian Information</h4>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="text-sm font-semibold text-gray-600 block mb-1">First Name</label>
                        <input type="text" id="edit-guardianName" class="w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all" value="${i.first_name||""}">
                    </div>
                    <div>
                        <label class="text-sm font-semibold text-gray-600 block mb-1">Last Name</label>
                        <input type="text" id="edit-guardianLastName" class="w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all" value="${i.last_name||""}">
                    </div>
                    <div class="md:col-span-2">
                        <label class="text-sm font-semibold text-gray-600 block mb-1">Phone</label>
                        <input type="tel" id="edit-guardianPhone" class="w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all" value="${i.phone||""}">
                    </div>
                </div>
            </div>
        `),f.innerHTML=u,s.appendChild(f),e?.children&&e.children.length>0){const b=document.createElement("div");b.className="bg-gradient-to-r from-amber-50 to-white rounded-xl p-4 border border-amber-100";let C=`
            <div class="flex items-center gap-2 mb-4">
                <div class="bg-amber-100 p-2 rounded-lg">
                    <svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                </div>
                <h4 class="font-bold text-amber-800 text-lg">Children Information</h4>
            </div>
        `;e.children.forEach((c,y)=>{C+=`
                <div class="bg-white rounded-xl p-4 mb-3 shadow-sm border border-amber-100">
                    <div class="flex items-center justify-between mb-3">
                        <span class="bg-amber-100 text-amber-700 font-bold px-3 py-1 rounded-full text-sm">Child ${y+1}</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="text-sm font-semibold text-gray-600 block mb-1">Name</label>
                            <input type="text" class="edit-child-name w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 transition-all" data-child-index="${y}" value="${c.name||""}">
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600 block mb-1">Birthday</label>
                            <div class="birthday-edit-wrapper" data-child-index="${y}">
                                ${yt(`childBirthday${y}`,c.birthday)}
                            </div>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600 block mb-1">Play Duration</label>
                            <select class="edit-child-duration w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 transition-all bg-white" data-child-index="${y}">
                                <option value="1" ${c.playtime_duration==="1"?"selected":""}>1 hour = &#8369;100</option>
                                <option value="2" ${c.playtime_duration==="2"?"selected":""}>2 hours = &#8369;200</option>
                                <option value="3" ${c.playtime_duration==="3"?"selected":""}>3 hours = &#8369;300</option>
                                <option value="4" ${c.playtime_duration==="4"?"selected":""}>4 hours = &#8369;400</option>
                                <option value="unlimited" ${c.playtime_duration==="unlimited"?"selected":""}>Unlimited = &#8369;500</option>
                            </select>
                        </div>
                        <div>
                            <label class="text-sm font-semibold text-gray-600 block mb-1">Add Socks (&#8369;50)</label>
                            <select class="edit-child-socks w-full border-2 border-gray-200 rounded-lg px-3 py-2.5 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 transition-all bg-white" data-child-index="${y}">
                                <option value="0" ${c.add_socks?"":"selected"}>No</option>
                                <option value="1" ${c.add_socks?"selected":""}>Yes</option>
                            </select>
                        </div>
                    </div>
                </div>
            `}),b.innerHTML=C,s.appendChild(b)}r.appendChild(s);const l=document.getElementById("save-btn"),m=l.cloneNode(!0);l.parentNode.replaceChild(m,l),m.addEventListener("click",()=>{const b=document.getElementById("edit-parentName"),C=document.getElementById("edit-parentLastName"),c=document.getElementById("edit-parentEmail"),y=document.getElementById("edit-phone");if(document.getElementById("edit-parentBirthday"),b){const p=document.getElementById("parentName");p&&(p.value=b.value)}if(C){const p=document.getElementById("parentLastName");p&&(p.value=C.value)}if(c){const p=document.getElementById("parentEmail");p&&(p.value=c.value)}if(y){const p=document.getElementById("phone");p&&(p.value=y.value)}const h=document.getElementById("edit-guardianName"),E=document.getElementById("edit-guardianLastName"),x=document.getElementById("edit-guardianPhone");if(h||E||x){const p=document.getElementById("add-guardian-checkbox");if(p&&p.click(),h){const g=document.getElementById("guardianName");g&&(g.value=h.value)}if(E){const g=document.getElementById("guardianLastName");g&&(g.value=E.value)}if(x){const g=document.getElementById("guardianPhone");g&&(g.value=x.value)}}const v=document.querySelector("#edit-parentBirthday");if(v){const p=v.querySelector(".birthday-month-select"),g=v.querySelector(".birthday-day-select"),S=v.querySelector(".birthday-year-select"),w=document.getElementById("parentBirthday");if(w&&p&&g&&S){const B=p.value,k=g.value,$=S.value;if(B&&k&&$){const O=`${$}-${B}-${k}`;w.dataset.birthdayValue=O;const A=w.querySelector('input[type="hidden"]');A&&(A.value=O),w.classList.remove("birthday-invalid"),w.classList.add("birthday-valid"),w.setAttribute("data-birthday-valid","true")}}}document.querySelectorAll(".edit-child-name").forEach(p=>{const g=p.dataset.childIndex,S=document.querySelectorAll(".child-entry");if(S[g]){const w=S[g].querySelector('input[name*="[name]"]');w&&(w.value=p.value)}}),document.querySelectorAll(".birthday-edit-wrapper").forEach(p=>{const g=p.dataset.childIndex,S=p.querySelector(".birthday-month-select"),w=p.querySelector(".birthday-day-select"),B=p.querySelector(".birthday-year-select");if(S&&w&&B){const k=S.value,$=w.value,O=B.value,A=document.querySelectorAll(".child-entry");if(A[g]){const I=A[g].querySelector("[data-birthday-dropdown]");if(I&&k&&$&&O){const q=`${O}-${k}-${$}`;I.dataset.birthdayValue=q;const J=I.querySelector('input[type="hidden"]');J&&(J.value=q),I.classList.remove("birthday-invalid"),I.classList.add("birthday-valid"),I.setAttribute("data-birthday-valid","true")}}}}),document.querySelectorAll(".edit-child-duration").forEach(p=>{const g=p.dataset.childIndex,S=document.querySelectorAll(".child-entry");if(S[g]){const w=S[g].querySelector('select[name*="[playDuration]"]');w&&(w.value=p.value)}}),document.querySelectorAll(".edit-child-socks").forEach(p=>{const g=p.dataset.childIndex,S=document.querySelectorAll(".child-entry");if(S[g]){const w=S[g].querySelector('select[name*="[addSocks]"]');if(w)w.value=p.value;else{const B=S[g].querySelector('input[name*="[addSocks]"]');B&&(B.value=p.value)}}}),t.classList.add("hidden"),window.populateSummary&&window.populateSummary()}),t.classList.remove("hidden")}document.addEventListener("DOMContentLoaded",function(){window.showSteps=c,window.getCurrentStep=()=>l,window.getSteps=()=>t,window.populateSummary=y,window.openEditModal=Mr;const e=document.getElementById("playhouse-registration-form"),t=document.querySelectorAll(".step"),n=document.getElementById("prev-btn"),r=document.getElementById("next-btn"),o=document.getElementById("submit-btn"),s=document.getElementById("filled-line"),a=[document.getElementById("step-1-num"),document.getElementById("step-2-num"),document.getElementById("step-3-num"),document.getElementById("step-4-num"),document.getElementById("step-5-num")],i=[document.getElementById("step-1-text"),document.getElementById("step-2-text"),document.getElementById("step-3-text"),document.getElementById("step-4-text"),document.getElementById("step-5-text")],f=document.getElementById("phone"),u=document.getElementById("next-btn");let l=0,m="";f&&u&&(u.disabled=!0);const b=(()=>{try{return new Ne("agree-checkbox-phone","check-agree-icon-phone","check-agree-info-phone")}catch{return null}})();window.updateNextBtnState=function(){if(C()!=="phone"){u&&(u.disabled=!1);return}const x=f?f.checkValidity():!1,v=b?b.isChecked():!1;u&&(u.disabled=!(x&&v))},f&&f.addEventListener("input",()=>{window.updateNextBtnState&&window.updateNextBtnState()}),b&&b.onChange(()=>{window.updateNextBtnState&&window.updateNextBtnState()}),r.addEventListener("click",async()=>{const E=t[l],x=E.querySelectorAll("input[required], select[required]");let v=!0,p=!0,g=!0,S=!0;x.forEach(w=>{w.id==="phone"?(R("log","Phone input detected, validating..."),validatePhone(w)?(R("log","Phone validation passed, calling generateOtp"),w.classList.remove("border-red-500"),generateOtp(w.value)):(R("log","Phone validation failed"),w.classList.remove("border-teal-500"),w.classList.add("border-red-500"),p=!1)):w.checkValidity()?(w.classList.remove("border-red-600"),w.classList.add("border-teal-500")):(w.classList.remove("border-teal-500"),w.classList.add("border-red-600"),p=!1)}),Cr(E),!(C()==="otp"&&(correctCode||(v=!1),R("log","OTP step - oldUser.isOldUser:",U.isOldUser),R("log","OTP step - oldUser.oldUserLoaded:",U.oldUserLoaded),R("log","OTP step - oldUser.phoneNumber:",U.phoneNumber),U.isOldUser&&!U.oldUserLoaded))&&(C()==="parent"&&(g=ht(E),(!g||!p)&&(v=!1)),C()==="children"&&(S=ht(E),(!S||!p)&&(v=!1),U.isOldUser&&ze===0&&(v=Qe())),v&&l<t.length-1&&(c(l+1,"next"),l+1===t.length-1&&y()))}),n.addEventListener("click",()=>{C()==="children"&&$e(!1),c(l-1,"prev")}),e.addEventListener("submit",async E=>{E.preventDefault(),R("log","Form submition active");const x=new FormData(e),v=Fr(Object.fromEntries(x.entries()));R("log","Before submit: ",v),m=await Je(ne.submitURL,v),R("log","Reply from Backend",m),m.isFormSubmitted&&h(m.orderNum)});function C(){return t[l].dataset.step}window.getCurrentStepName=C;function c(E,x="next",v=null){const p=t[l];let g=l,S=t[0];a.forEach((B,k)=>{k<=E?(B.classList.remove("border-gray-300","bg-white","text-gray-500"),B.classList.add("border-teal-300","bg-amber-200","text-teal-500")):(B.classList.remove("border-teal-300","bg-amber-200","text-teal-500"),B.classList.add("border-gray-300","bg-white","text-gray-500"))}),i.forEach((B,k)=>{k===E?(B.classList.remove("text-gray-700"),B.classList.add("text-teal-500")):(B.classList.remove("text-teal-500"),B.classList.add("text-gray-700"))});const w=E/(t.length-1)*100;if(s.style.width=`${w}%`,x==="next"&&l<t.length-1)g=v?l+v:l+1;else if(x==="prev"&&l>0)g=v?l-v:l-1;else return;g=Math.max(0,Math.min(g,t.length-1)),S=t[g],x==="next"?(p.classList.remove("slide-in-left","slide-in-right"),p.classList.add("slide-out-left")):x==="prev"&&(p.classList.remove("slide-in-left","slide-in-right"),p.classList.add("slide-out-right")),setTimeout(()=>{p.classList.add("hidden"),p.classList.remove("slide-out-left","slide-out-right"),S.classList.remove("hidden"),x==="next"?(S.classList.remove("slide-out-right"),S.classList.add("slide-in-right")):x==="prev"&&(S.classList.remove("slide-out-left"),S.classList.add("slide-in-left")),l=g,n.classList.toggle("hidden",l===0),r.classList.toggle("hidden",l===t.length-1),o.classList.toggle("hidden",l!==t.length-1),window.updateNextBtnState&&window.updateNextBtnState()},300)}function y(){const E=document.getElementById("summaryContainer"),x=new FormData(document.getElementById("playhouse-registration-form"));let v=x.get("parentEmail")?`(${x.get("parentEmail")})`:"",p=x.get("guardianPhone")?`(${x.get("guardianPhone")})`:"";const g=document.getElementById("parentBirthday-hidden"),S=g.value?te("shortDate",g.value):"-";let w="",B="",k=0,$=!1;const O={1:100,2:200,3:300,4:400,unlimited:500};document.querySelectorAll(".child-entry").forEach((T,M)=>{const Y=T.querySelector('input[name*="[name]"]'),W=T.querySelector('input[name*="[birthday]"]'),K=T.querySelector('select[name*="[playDuration]"]'),ie=T.querySelector('select[name*="[addSocks]"]'),he=Y?Y.value:"Child",ke=W?W.value:"-",ye=K?K.value:"",Jt=ie&&ie.value==="1"?"Socks Added":"",Wt={1:"1 hr = 100",2:"2 hrs = 200",3:"3 hrs = 300",4:"4 hrs = 400",unlimited:"Unlimited = 500"}[ye]||ye;O[ye]&&(k+=O[ye]),w+=`
                        <div class="bg-teal-50 border border-teal-200 rounded p-3">
                            <p class="text-sm text-gray-600">Name: <span class="font-bold text-gray-900">${he}</span></p> 
							<p class="text-sm text-gray-600 mt-1">Birthday: <span class="font-medium text-gray-900">${te("shortDate",ke)}</span></p>
							<p class="text-sm text-gray-600 mt-1">Duration: <span class="font-medium text-gray-900">${Wt}</span></p>
                            <p class="text-sm text-gray-900 font-bold mt-1">${Jt}</p>
                        </div>
                `});const A=countSelectedSocks(),I=k+A;oe.isChecked()&&(B=`
                    <div class="flex items-center border-b border-cyan-400 py-2 max-w-full overflow-auto">
                        <span class="font-semibold text-cyan-800 w-fit">Guardian:&nbsp;</span>
                        <span class="text-gray-900 font-medium">${x.get("guardianName")} ${x.get("guardianLastName")} ${p}</span>
                    </div>
                `);const q=x.get("parentName")||"",J=x.get("parentLastName")||"",P=[q,J].filter(T=>T).join(" ")||"-";E.innerHTML=`
                    <div class="flex items-center border-b border-cyan-400 py-2 max-w-full overflow-auto">
                        <span class="font-semibold text-cyan-800 w-fit">Parent:&nbsp;</span>
                        <span class="text-gray-900 font-medium">${P} ${v}</span>
                    </div>
                    <div class="flex items-start border-b border-cyan-400 py-2">
                        <span class="font-semibold text-cyan-800 w-fit">Phone:&nbsp;</span>
                        <span class="text-gray-900 font-medium">${x.get("phone")}</span>
                    </div>
                    <div class="flex items-center border-b border-cyan-400 py-2">
                        <span class="font-semibold text-cyan-800 w-fit">Birthdate:&nbsp;</span>
                        <span class="text-gray-900 font-medium">${x.get("parentBirthday")?te("shortDate",x.get("parentBirthday")):S}</span>
                    </div>
                    ${B}
                    <div class="pb-3">
                        <span class="font-semibold text-cyan-800 block mb-3">Children:</span>
                        <div id="summary-children-list" class="space-y-3 ml-2">
                            ${w}
                        </div>
                    </div>
                    <div class="mt-6 pt-4 border-t-2 border-cyan-400 space-y-4">
                        <div class="bg-gradient-to-r from-teal-100 to-cyan-100 border-2 border-teal-400 rounded-lg p-4">
                            <p class="text-lg font-bold text-teal-800 mb-2">DISCOUNT CODE</p>
                            <p class="text-xs text-gray-600 mb-3">Got a discount? Enter it below  and come back soon for more offers!</p>
                            <div class="flex flex-col sm:flex-row gap-3">
                                <input type="text" id="discount-code-input" name="discountCode" placeholder="Enter code" class="flex-1 min-h-[44px] px-4 py-3 text-base border-2 border-teal-300 rounded-lg focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 outline-none transition-all">
                                <button type="button" id="apply-discount-btn" class="min-h-[44px] px-5 py-3 text-base font-semibold text-white bg-teal-600 hover:bg-teal-700 rounded-lg transition-colors touch-manipulation">Apply</button>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-teal-100 to-cyan-100 border-2 border-teal-400 rounded-lg p-4">
                            <p class="text-lg font-bold text-teal-800">OVERALL TOTAL: <span class="text-2xl text-cyan-600">${I}</span></p>
                            <p class="text-xs text-gray-600 mt-2">Children: ${k} | Item: ${A}</p>
                        </div>
                    </div>
                    <div class="mt-4 flex justify-end">
                        <button type="button" id="edit-review-btn" class="inline-flex items-center px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors">
                            <i class="fa-solid fa-pen-to-square mr-2"></i>Edit Review
                        </button>
                    </div>
            `;const ae=document.getElementById("discount-code-input"),H=document.getElementById("apply-discount-btn");let Z=!1;H.addEventListener("click",()=>{Z=!Z,Z?(ae.setAttribute("readonly",!0),H.textContent="Edit"):(ae.removeAttribute("readonly"),H.textContent="Apply")}),x.get("parentBirthday")&&($=!0);const pe=document.getElementById("edit-review-btn");pe&&pe.addEventListener("click",()=>{const T={parent:{first_name:x.get("parentName"),last_name:x.get("parentLastName"),email:x.get("parentEmail"),birthday:x.get("parentBirthday")},phone:x.get("phone"),guardian:oe.isChecked()?{first_name:x.get("guardianName"),last_name:x.get("guardianLastName"),phone:x.get("guardianPhone")}:null,children:[]};document.querySelectorAll(".child-entry").forEach(M=>{const Y=M.querySelector('input[name*="[name]"]'),W=M.querySelector('input[name*="[birthday]"]'),K=M.querySelector('select[name*="[playDuration]"]'),ie=M.querySelector('select[name*="[addSocks]"]'),he=M.querySelector('[id*="add-socks-child-icon"]'),ke=ie&&ie.value==="1"||he&&he.classList.contains("fa-check-square");T.children.push({name:Y?Y.value:"",birthday:W?W.value:"",playtime_duration:K?K.value:"",add_socks:ke})}),window.openEditModal(T)}),b.isChecked()&&(o.disabled=!1),R("log","Is Parent Birthdate filled? ",$),$?$e(!1):$e()}function h(E){const x=document.getElementById("qr-container"),v=document.getElementById("order-number-text"),p=document.getElementById("qr-image");e.classList.add("hidden"),i.forEach(S=>{S.classList.remove("text-gray-700"),S.classList.add("text-teal-500")}),x.classList.remove("hidden"),v.textContent=E,p.innerHTML="";const g=document.getElementById("order-info-link");g&&(g.href=`/order-info/${E}`,g.classList.remove("hidden")),new QRCode(p,{text:E,width:150,height:150})}});
